
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Field Calculator Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../working_with_raster/supported_data.html" />
    
    
    <link rel="prev" href="expression.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../index.html">
            
                    
                    General
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../">
            
                <a href="../index.html#sec0">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../">
            
                <a href="../index.html#sec1">
            
                    
                    Terms of Use
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="../">
            
                <a href="../index.html#sec2">
            
                    
                    System requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="../">
            
                <a href="../index.html#sec3">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html">
            
                    
                    KADAS Interface
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html#sec0">
            
                    
                    Functionality menu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html#sec1">
            
                    
                    Favorites and search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html#sec2">
            
                    
                    Map View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html#sec3">
            
                    
                    Layers and geodata catalog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../kadas_gui.html">
            
                <a href="../kadas_gui.html#sec4">
            
                    
                    Status bar
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../map.html">
            
                <a href="../map.html">
            
                    
                    Map
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../map.html">
            
                <a href="../map.html#sec0">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../map.html">
            
                <a href="../map.html#sec1">
            
                    
                    Creating and saving maps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../map.html">
            
                <a href="../map.html#sec2">
            
                    
                    Open projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../map.html">
            
                <a href="../map.html#sec3">
            
                    
                    Printing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../map.html">
            
                <a href="../map.html#sec4">
            
                    
                    Copy map / Save map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../map.html">
            
                <a href="../map.html#sec5">
            
                    
                    KML / KMZ export and import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../map.html">
            
                <a href="../map.html#sec6">
            
                    
                    GPKG Export and Import
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../view.html">
            
                <a href="../view.html">
            
                    
                    View
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../view.html">
            
                <a href="../view.html#sec0">
            
                    
                    Previous/Next extent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../view.html">
            
                <a href="../view.html#sec1">
            
                    
                    New map window
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../view.html">
            
                <a href="../view.html#sec2">
            
                    
                    3D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../view.html">
            
                <a href="../view.html#sec3">
            
                    
                    Grid
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../analysis.html">
            
                <a href="../analysis.html">
            
                    
                    Analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../analysis.html">
            
                <a href="../analysis.html#sec0">
            
                    
                    Measuring lengths, areas and azimuth angles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../analysis.html">
            
                <a href="../analysis.html#sec1">
            
                    
                    Height profile and line of sight
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../analysis.html">
            
                <a href="../analysis.html#sec2">
            
                    
                    Slope and hillshade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../analysis.html">
            
                <a href="../analysis.html#sec3">
            
                    
                    Viewshed
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../draw.html">
            
                <a href="../draw.html">
            
                    
                    Draw
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../draw.html">
            
                <a href="../draw.html#sec0">
            
                    
                    Geometries and labels (Redlining)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../draw.html">
            
                <a href="../draw.html#sec1">
            
                    
                    Pins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../draw.html">
            
                <a href="../draw.html#sec2">
            
                    
                    Add Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../draw.html">
            
                <a href="../draw.html#sec3">
            
                    
                    Paste
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../draw.html">
            
                <a href="../draw.html#sec4">
            
                    
                    SymTaZ symbols
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../draw.html">
            
                <a href="../draw.html#sec5">
            
                    
                    Guide grid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../draw.html">
            
                <a href="../draw.html#sec6">
            
                    
                    Bullseye
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../draw.html">
            
                <a href="../draw.html#sec7">
            
                    
                    Delete items
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../gps.html">
            
                <a href="../gps.html">
            
                    
                    GPS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../gps.html">
            
                <a href="../gps.html#sec0">
            
                    
                    Enabling GPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../gps.html">
            
                <a href="../gps.html#sec1">
            
                    
                    Moving with GPS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../gps.html">
            
                <a href="../gps.html#sec2">
            
                    
                    Drawing waypoints and routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../gps.html">
            
                <a href="../gps.html#sec3">
            
                    
                    GPX export und import
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../mss.html">
            
                <a href="../mss.html">
            
                    
                    MSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../mss.html">
            
                <a href="../mss.html#sec0">
            
                    
                    Draw MSS symbols
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../mss.html">
            
                <a href="../mss.html#sec1">
            
                    
                    Edit MSS symbols
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../mss.html">
            
                <a href="../mss.html#sec2">
            
                    
                    Layer management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../mss.html">
            
                <a href="../mss.html#sec3">
            
                    
                    MilX import and export
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../mss.html">
            
                <a href="../mss.html#sec4">
            
                    
                    OVL import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../mss.html">
            
                <a href="../mss.html#sec5">
            
                    
                    Symbol size, line width and work mode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../settings.html">
            
                <a href="../settings.html">
            
                    
                    Settings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../settings.html">
            
                <a href="../settings.html#sec0">
            
                    
                    Language
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../settings.html">
            
                <a href="../settings.html#sec1">
            
                    
                    Height unit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../settings.html">
            
                <a href="../settings.html#sec2">
            
                    
                    Numeric input box
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../settings.html">
            
                <a href="../settings.html#sec3">
            
                    
                    Measurement decimal places
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../settings.html">
            
                <a href="../settings.html#sec4">
            
                    
                    Snap to vertices when drawing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../settings.html">
            
                <a href="../settings.html#sec5">
            
                    
                    Help / About
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Reference for advanced functionalities
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../working_with_projections/working_with_projections.html">
            
                <a href="../working_with_projections/working_with_projections.html">
            
                    
                    Working with Projections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../print_composer/print_composer.html">
            
                <a href="../print_composer/print_composer.html">
            
                    
                    Print Composer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="supported_data.html">
            
                <a href="supported_data.html">
            
                    
                    Working with Vector Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="vector_properties.html">
            
                <a href="vector_properties.html">
            
                    
                    The Vector Properties Dialog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="expression.html">
            
                <a href="expression.html">
            
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.10.6" data-path="field_calculator.html">
            
                <a href="field_calculator.html">
            
                    
                    Field Calculator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../working_with_raster/supported_data.html">
            
                <a href="../working_with_raster/supported_data.html">
            
                    
                    Working with Raster Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../working_with_raster/raster_properties.html">
            
                <a href="../working_with_raster/raster_properties.html">
            
                    
                    Raster Properties Dialog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../gpsgate/gpsgate.html">
            
                <a href="../gpsgate/gpsgate.html">
            
                    
                    Configuring GPSGate
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Appendix
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../appendices/shortcuts.html">
            
                <a href="../appendices/shortcuts.html">
            
                    
                    Keyboard shortcuts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../appendices/license.html">
            
                <a href="../appendices/license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Field Calculator</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="field-calculator-">Field Calculator <a name="#field-calculator"></a></h1>
<p>The <img src="../../images/mActionCalculateField.png"> <em>Field Calculator</em> button in the attribute table allows you to perform calculations on the basis of existing attribute values or defined functions, for instance, to calculate length or area of geometry features. The results can be written to a new attribute field, a virtual field, or they can be used to update values in an existing field.</p>
<p><strong>Virtual Fields</strong></p>
<ul>
<li>Virtual fields are not permanent and are not saved.</li>
<li>To make a field virtual it must be done when the field is made.</li>
</ul>
<p>The field calculator is now available on any layer that supports edit. When you click on the field calculator icon the dialog opens. If the layer is not in edit mode, a warning is displayed and using the field calculator will cause the layer to be put in edit mode before the calculation is made.</p>
<p>The quick field calculation bar on top of the attribute table is only visible if the layer is editable.</p>
<p>In quick field calculation bar, you first select the existing field name then open the expression dialog to create your expression or write it directly in the field then click on <strong>Update All</strong> button.</p>
<h2 id="expression-tab-">Expression tab <a name="#expression-tab"></a></h2>
<p>In the field calculator dialog, you first must select whether you want to only update selected features, create a new attribute field where the results of the calculation will be added or update an existing field.</p>
<p><img src="../../images/fieldcalculator.png" alt=""></p>
<p>If you choose to add a new field, you need to enter a field name, a field type (integer, real or string), the total field width, and the field precision. For example, if you choose a field width of 10 and a field precision of 3, it means you have 6 digits before the dot, then the dot and another 3 digits for the precision.</p>
<p>A short example illustrates how field calculator works when using the <em>Expression</em> tab. We want to calculate the length in km of the <code>railroads</code> layer from the KADAS sample dataset:</p>
<ol>
<li>Load the shapefile <code>railroads.shp</code> in KADAS and press <img src="../../images/mActionOpenTable.png"> <em>Open Attribute Table</em>.</li>
<li>Click on <img src="../../images/mActionToggleEditing.png"> <em>Toggle editing mode</em> and open the <img src="../../images/mActionCalculateField.png"> <em>Field Calculator</em> dialog.</li>
<li>Select the <img src="../../images/checkbox.png"> <em>Create a new field</em> checkbox to save the calculations into a new field.</li>
<li>Add <code>length</code> as Output field name and <code>real</code> as Output field type, and define Output field width to be 10 and Precision, 3.</li>
<li>Now double click on function <code>$length</code> in the <em>Geometry</em> group to add it into the Field calculator expression box.</li>
<li>Complete the expression by typing &#x2018;&#x2019;/ 1000&#x2019;&#x2019; in the Field calculator expression box and click <strong>[Ok]</strong>.</li>
<li>You can now find a new field <code>length</code> in the attribute table.</li>
</ol>
<p>The available functions are listed in <a href="expression.html">Expressions</a> chapter.</p>
<h2 id="function-editor-tab-">Function Editor tab <a name="#function-editor-tab"></a></h2>
<p>With the Function Editor you are able to define your own Python custom functions in a comfortable way. The function editor will create new Python files in <code>qgis2pythonexpressions</code> and will auto load all functions defined when starting QGIS. Be aware that new functions are only saved in the <code>expressions</code> folder and not in the project file. If you have a project that uses one of your custom functions you will need to also share the .py file in the expressions folder.</p>
<p>Here&#x2019;s a short example on how to create your own functions:</p>
<pre><code>@qgsfunction(args=&quot;auto&quot;, group=&apos;Custom&apos;)
def myfunc(value1, value2 feature, parent):
    pass
</code></pre><p>The short example creates a function &#x2018;myfunc&#x2019; that will give you a function with two values. When using the args=&#x2019;auto&#x2019; function argument the number of function arguments required will be calculated by the number of arguments the function has been defined with in Python (minus 2 - feature, and parent).</p>
<p>This function then can be used with the following expression:</p>
<pre><code>myfunc(&apos;test1&apos;, &apos;test2&apos;)
</code></pre><p>Your function will be implemented in the &#x2018;Custom&#x2019; <em>Functions</em> of the <em>Expression</em> tab after using the <em>Run Script</em> button.</p>
<p>Further information about creating Python code can be found on <a href="http://www.qgis.org/html/en/docs/pyqgis_developer_cookbook/index.html" target="_blank">http://www.qgis.org/html/en/docs/pyqgis_developer_cookbook/index.html</a>.</p>
<p>The function editor is not only limited to working with the field calculator, it can be found whenever you work with expressions.</p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="expression.html" class="navigation navigation-prev " aria-label="Previous page: Expressions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../working_with_raster/supported_data.html" class="navigation navigation-next " aria-label="Next page: Working with Raster Data">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Field Calculator","level":"1.10.6","depth":2,"next":{"title":"Working with Raster Data","level":"1.10.7","depth":2,"path":"working_with_raster/supported_data.md","ref":"working_with_raster/supported_data.md","articles":[]},"previous":{"title":"Expressions","level":"1.10.5","depth":2,"path":"working_with_vector/expression.md","ref":"working_with_vector/expression.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-search","-lunr","-sharing","-buttons","-fontsettings"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"working_with_vector/field_calculator.md","mtime":"2018-12-10T18:21:37.352Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-28T09:26:12.458Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    

    </body>
</html>

