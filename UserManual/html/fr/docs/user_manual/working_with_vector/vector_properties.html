<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fenêtre Propriétés d’une couche vecteur</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/qgis-style.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../_static/qgis-site.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/images/favicon.ico?1322140996"/>
    <link rel="top" title="" href="../../../index.html" />
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
    <meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>



    
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../index.html">QGIS Documentation Project</a>
        <span class="navbar-text pull-left"></span>
        
          <select id="languages">
  <!-- note on the options here: the 'title' string is to be translated in your
  language, but the element text is supposed to stay in native lang/txt -->
  <option value="en" title="Anglais">English</option>
  <option value="de" title="Allemand">Deutsch</option>
  <option value="fr" title="Français">Français</option>
  <option value="it" title="Italien">Italiano</option>
</select>

<script>
    var currentPage = 'docs/user_manual/working_with_vector/vector_properties.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    // split index.html if currentUrl is ended by '/'
    var currentUrl = window.location.href;
    if (currentUrl.slice(-1) == '/' && currentPage.slice(-1) != '/'){
      var pages = currentPage.split('/');
      pages.pop();
      currentPage = pages.join('/') + '/';
    }
    $(document).ready(function(){
        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is the index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave
        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('This is an documentation error, please report back to QGIS devs.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        // TODO: links should come from conf.py
        // TODO: all template pages have the actual translation in sphinc.conf
        // IMPORTANT: space, -, _ etc replacing below must be 100% inline with
        // code in scripts/create_transifex_resources.sh !!
        // https://github.com/qgis/QGIS-Website/blob/master/scripts/create_transifex_resources.sh
        fix_translation_link = 'https://www.transifex.com/projects/p/qgis-documentation/translate/#' + 
            currentLang.slice(1) + currentPage.replace(/_/g, "-").replace(/ /g, "-").replace(/\//g, "_").replace(/\.html/g, "").replace(/\./g, "-")
        if ('/en/' != currentLang) {
            $('#fix_translation_link').attr('href', fix_translation_link);
        }
        fix_text_link = 'https://github.com/qgis/QGIS-Documentation/edit/master/source/' +
            currentPage.replace(/.html/g, ".rst")
        // TODO: only on rst pages, here a list of pages which are actual templates?
        if (true){
            $('#fix_text_link').attr('href', fix_text_link);
        }

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>
        
        <div class="nav-collapse collapse">
          <ul class="unstyled nav main-menu">
            <!--<li><a href="../../../site/about/index.html">Découvrir</a></li>
            <li><a href="../../../site/forusers/index.html">Pour les utilisateurs</a></li>
            <li><a href="../../../site/getinvolved/index.html">Contribuer</a></li>
            <li><a href="../../index.html">Documentation</a></li>-->
            <li><a href="../../index.html">User Guide</a></li>
            <li>
          
<form class="navbar-search" action="../../../search.html" method="get">
  <input type="text" name="q" class="search-query" placeholder="Rechercher" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

    
    <div class="related">
       
      
      <ul>
        <li><a href="../index.html"></a> &raquo;</li> 
      </ul>
    </div>
    <div style="display:none;" class="container" id="nextprev" >
    
    
    </div>




    
        <div class="container">
            <div class="row">
      <div class="span4">
        <div id="sidebar" class="bs-sidenav well" data-spy="scroll">
<h3><a href="../index.html">Table Des Matières</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preamble/preamble.html">Préambule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preamble/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preamble/foreword.html">Avant-propos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/qgis_gui.html">Interface de KADAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/my_maps.html">Mes cartes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/view.html">Ansicht</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/analysis.html">Analyse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/draw.html">Dessiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/gps.html">GPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/mss.html">MSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/settings.html">Einstellungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ribbons/help.html">Hilfe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/appendices.html">Annexe</a></li>
</ul>

        </div>
      </div>
                <div class="span8">
                    
                        
                            <p>.</p>
<div class="section" id="the-vector-properties-dialog">
<span id="vector-properties-dialog"></span><h1>Fenêtre Propriétés d&#8217;une couche vecteur<a class="headerlink" href="#the-vector-properties-dialog" title="Lien permanent vers ce titre">¶</a></h1>
<p>TODO: wurde leicht abgeändert</p>
<p>La fenêtre <em class="guilabel">Propriétés de la couche</em> pour une couche vectorielle fournit des informations sur la couche, les paramètres de représentation et les options d&#8217;étiquetage. Si votre couche a été chargée depuis une base PostgreSQL/PostGIS, vous pouvez également modifier la requête SQL d&#8217;appel de la couche, en l&#8217;éditant dans la fenêtre <em class="guilabel">Constructeur de requête</em> de l&#8217;onglet <em class="guilabel">Général</em>. Pour accéder à la fenêtre <em class="guilabel">Propriétés de la couche</em>, double-cliquez sur la couche dans la légende ou faites un clic droit sur la couche et sélectionnez <em class="menuselection">Propriétés</em> dans le menu qui apparait.</p>
<p><strong>Figure Vector Properties 1:</strong></p>
<div class="figure align-center" id="figure-vector-properties-1">
<img alt="../../../_images/vector_general_menu.png" src="../../../_images/vector_general_menu.png" />
<p class="caption">Fenêtre de Propriétés d&#8217;une couche vecteur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<div class="section" id="style-menu">
<span id="vector-style-menu"></span><h2>Onglet Style<a class="headerlink" href="#style-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p>L&#8217;onglet Style fournit un outil complet pour le rendu et la gestion de la sémiologie des couches vectorielles. Il permet de gérer le <em class="menuselection">Rendu de couche ‣</em>, avec un ensemble d&#8217;outils communs à tous les types de couche vecteur ainsi que des outils de symbologie spécifiques à chaque type.</p>
<div class="section" id="renderers">
<h3>Modes de rendu<a class="headerlink" href="#renderers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le moteur de rendu est chargé de dessiner une entité avec son symbole correct. Il existe quatre types de moteurs de rendu : symbole unique, catégorisé, gradué et basé sur des règles. Il n&#8217;y a pas de rendu de couleur continue, car il s&#8217;agit en fait d&#8217;un cas particulier du rendu gradué. Les moteurs de rendu classés et gradués peuvent être créés en spécifiant un symbole et une rampe de couleur - ils définissent les couleurs pour les symboles de manière appropriée. Pour les couches de points, il y a un moteur de rendu par déplacement de point disponible. Pour chaque type de données (points, lignes et polygones), des types de couches de symboles vectoriels sont disponibles. Selon le moteur de rendu choisi, l&#8217;onglet <em class="guilabel">Style</em> fournit différentes sections supplémentaires. Dans la fenêtre de symbologie, il y a un bouton <strong>[Ouvrir la bibliothèque]</strong> qui donne accès au Gestionnaire de Symboles (voir <em class="xref std std-ref">vector_style_manager</em>). Le Gestionnaire de Symboles vous permet de modifier et de supprimer des symboles existants et d&#8217;en ajouter de nouveaux.</p>
<p>Après toutes modifications, le symbole peut-être ajouté à la liste courante des symboles disponibles (via le bouton <strong>[Enregistrer]</strong>), et pourra donc être facilement réutilisé. De plus, vous pouvez utiliser le bouton <strong>[Style &#8211;&gt; Enregistrer le style]</strong> pour sauvegarder le style en .qml (fichier de style de couche QGIS) ou au format SLD (.sld). Les SLD peuvent être exportés depuis n&#8217;importe quel style de rendu &#8211; symbole simple, catégories, gradués, basés sur des règles &#8211; mais lors de l&#8217;import d&#8217;un SLD, un rendu du type symbole simple ou basé sur des règles est créé. Cela signifie que les catégories ou symboles gradués sont convertis en ensemble de règles. Si vous voulez préserver ce type de rendu,  vous devez utiliser le format QML. D&#8217;un autre coté, cela peut être parfois très pratique d&#8217;avoir la possibilité de simplement convertir des styles en ensemble de règles.</p>
<p>Si, en travaillant sur le style d&#8217;une couche vectorielle, vous changez de mode de rendu, les changements effectués sur le symbole sont mémorisés. Notez que cela ne fonctionne qu&#8217;une seule fois. Si vous changez à nouveau de mode de rendu, les paramètres seront perdus.</p>
<p>Si la source d&#8217;une couche est une base de données (PostGIS ou Spatialite par exemple), vous pouvez sauvegarder le style de la couche dans une table de la base de données. Cliquez simplement sur la liste déroulante <em class="guilabel">Enregistrer le style</em> et choisissez <strong>Enregistrer dans la base de données</strong>. Renseignez ensuite dans la fenêtre le nom du style, sa description, un fichier ui et s&#8217;il s&#8217;agit du style par défaut. En ouvrant une couche issue d&#8217;une base de données, si un style a été défini pour cette couche, KADAS le chargera automatiquement. Vous pouvez ajouter plusieurs styles dans la base de données. Un seul pourra être le style par défaut.</p>
<p><strong>Figure Vector Properties 2:</strong></p>
<div class="figure align-center" id="figure-vector-properties-2">
<img alt="../../../_images/save_style_database.png" src="../../../_images/save_style_database.png" />
<p class="caption">Fenêtre d&#8217;enregistrement d&#8217;un style dans une base de données <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<div class="admonition tip" id="tip-change-multiple-symbols">
<p class="first admonition-title">Astuce</p>
<p><strong>Sélectionner et modifier plusieurs symboles</strong></p>
<p class="last">Il est possible de sélectionner plusieurs symboles, de faire un clic-droit dessus et de changer en une seule opération leur couleur, leur transparence, leur taille ou leur épaisseur.</p>
</div>
<p id="index-0"><strong>Symboles uniques</strong></p>
<p>Le mode de rendu en symbole unique est utilisé pour représenter toutes les entités de la couche de la même façon, définie par l&#8217;utilisateur. Les propriétés, qui peuvent être ajustées dans l&#8217;onglet <em class="guilabel">Style</em>, dépendent du type de géométrie de la couche, mais partagent une structure similaire. En haut à gauche figure un aperçu du symbole tel qu&#8217;il apparaîtra. A droite est affichée la liste des symboles déjà existants pour le style courant, prêts à être sélectionnés d&#8217;un simple clic. Le symbole courant peut être modifié en utilisant les outils à droite de l&#8217;aperçu.</p>
<p id="defining-symbols">Si vous cliquez sur le premier niveau de la liste des <em class="guilabel">Couches de symbole</em>, sur la gauche, il est possible de choisir un certain nombre de paramètres basiques comme la <em class="guilabel">Taille</em>, la <em class="guilabel">Transparence</em>, la <em class="guilabel">Couleur</em> ou l&#8217;angle de <em class="guilabel">Rotation</em>. Ces paramètres s&#8217;appliquent à toutes les couches de symboles.</p>
<p id="figure-symbology-3"><strong>Figure Symbology 3:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/singlesymbol_ng_line.png" src="../../../_images/singlesymbol_ng_line.png" />
<p class="caption">Propriétés &#8220;Symbole Unique&#8221; de ligne <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Dans chaque zone de sélection numérique de cette boîte de dialogue vous pouvez taper des expressions. Par exemple, vous pouvez faire des calculs mathématiques simples comme multiplier la taille actuelle d&#8217;un point pas 3 sans avoir recours à une calculette.</p>
<p id="figure-symbology-4"><strong>Figure Symbology 4:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/expression_symbol_size_spinbox.png" src="../../../_images/expression_symbol_size_spinbox.png" />
<p class="caption">Expression dans le champ Taille <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Si vous cliquez sur le deuxième niveau dans la boîte de dialogue <em class="guilabel">Symbol layers</em> il est possible d&#8217;avoir presque tous les paramètres &#8216;Définis par les données&#8217;. Lorsqu&#8217;une couleur est définie par les données on peut lier la couleur à un champ &#8216;calculé&#8217;. Une fonctionnalité de commentaires est insérée ci-dessous.</p>
<div class="highlight-python"><pre>/* This expression will return a color code depending on the field value.
 * Negative value: red
 * 0 value: yellow
 * Positive value: green
 */
CASE
  WHEN value &lt; 0 THEN '#DC143C' -- Negative value: red
  WHEN value = 0 THEN '#CCCC00' -- Value 0: yellow
  ELSE '#228B22'                -- Positive value: green
END</pre>
</div>
<p id="figure-symbology-5"><strong>Figure Symbology 5:</strong></p>
<div class="figure align-center">
<img alt="static/user_manual/working_with_vector/symbol_data_defined_edit.png" src="static/user_manual/working_with_vector/symbol_data_defined_edit.png" />
<p class="caption">Symbole défini par les données via le menu Édition...</p>
</div>
<p id="index-1"><strong>Symboles catégorisés</strong></p>
<p>Le rendu Catégorisé est utilisé pour représenter toutes les entités d&#8217;une couche classées par catégorie qui dépend d&#8217;un des attributs de l&#8217;entité. L&#8217;onglet <em class="guilabel">Style</em> permet de sélectionner :</p>
<ul class="simple">
<li><p class="first">L&#8217;attribut (en utilisant la liste déroulante de Colonne ou la fonction  <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> <em class="guilabel">Définir une expression de colonne</em> voir <a class="reference internal" href="expression.html#vector-expressions"><em>Expressions</em></a>)</p>
</li>
<li><p class="first">le symbole (en utilisant la fenêtre de Sélection de symbole)</p>
</li>
<li><p class="first">Les couleurs (en utilisant la liste de palettes de couleur)</p>
</li>
</ul>
<p>Cliquez ensuite sur le bouton <strong>Classer</strong> pour générer les classes pour toutes les valeurs différentes trouvées dans le champ de la table attributaire. Chaque classe peut être désactivée en décochant la case située à gauche du symbole de classe.</p>
<p>Vous pouvez changer le symbole, la valeur et / ou la légende en double-cliquant sur l&#8217;élément à modifier.</p>
<p>Un clic-droit vous propose de <strong>Copier / Coller</strong>, <strong>Modifier la couleur</strong>,  <strong>Modifier la transparence</strong>, <strong>Modifier l&#8217;unité de sortie</strong> ou <strong>Modifier la taille</strong>.</p>
<p>Le bouton <strong>[Avancé]</strong> dans le coin inférieur droit de la fenêtre vous permet de choisir un champ pour faire varier l&#8217;angle de rotation et la taille des symboles. Tous les champs de la couche sont alors disponibles, même s&#8217;ils ne sont pas utilisés pour le rendu par catégorie.</p>
<p>L&#8217;exemple de la figure <a class="reference internal" href="#figure-symbology-6">figure_symbology_6</a> montre le rendu des catégories de la couche des rivières de l&#8217;échantillon de données de KADAS.</p>
<p id="figure-symbology-6"><strong>Figure Symbology 6:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/categorysymbol_ng_line.png" src="../../../_images/categorysymbol_ng_line.png" />
<p class="caption">Options du mode de rendu Catégorisé <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<span class="target" id="index-2"></span><p id="index-3"><strong>Symboles gradués</strong></p>
<p>Le rendu gradué est utilisé pour afficher toutes les entités d&#8217;une couche, en utilisant un symbole de couche défini par l&#8217;utilisateur dont la couleur reflètera la plage d&#8217;appartenance d&#8217;une valeur d&#8217;un attribut.</p>
<p id="figure-symbology-7"><strong>Figure Symbology 7:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/graduatesymbol_ng_line.png" src="../../../_images/graduatesymbol_ng_line.png" />
<p class="caption">Options du mode de rendu Gradué <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>De la même manière que le rendu catégorisé, le rendu Gradué permet de faire varier l&#8217;angle de rotation et la taille des symboles selon les valeurs des champs spécifiés.</p>
<p>De la même façon que le rendu Catégorisé, l&#8217;onglet <em class="guilabel">Style</em> vous permet de modifier les points suivants :</p>
<ul class="simple">
<li><p class="first">L&#8217;attribut (en utilisant la liste déroulante de Colonne ou la fonction  <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> <em class="guilabel">Définir une expression de colonne</em>, voir <a class="reference internal" href="expression.html#vector-expressions"><em>Expressions</em></a>)</p>
</li>
<li><p class="first">Le symbole (en utilisant le bouton Changer)</p>
</li>
<li><p class="first">Les couleurs (en utilisant la liste des palettes de couleur)</p>
</li>
</ul>
<p>De plus, vous pouvez choisir le nombre de classes et la méthode de classification (depuis la liste déroulante Mode). Les modes disponibles sont :</p>
<ul class="simple">
<li><p class="first">Intervalles égaux : toutes les classes sont de même taille (par exemple, avec des valeurs allant de 0 à 16 et 4 classes, chaque classe aura une taille de 4);</p>
</li>
<li><p class="first">Quantile : toutes les classes auront le même effectif (même principe que pour les boîtes à moustache);</p>
</li>
<li><p class="first">Ruptures naturelles (Jenks) : la variance de chaque classe est minimale tandis que la variance entre les différentes classes est maximale;</p>
</li>
<li><p class="first">Écart-type : les classes sont construites en fonction le l&#8217;écart-type calculé sur l&#8217;ensemble des valeurs;</p>
</li>
<li><p class="first">Jolies ruptures : même principe que pour les intervalles égaux mais les limites de classe sont des entiers.</p>
</li>
</ul>
<p>La zone de liste dans la partie centrale du menu <em class="guilabel">Style</em> répertorie les classes ainsi que leurs étendues, étiquettes et symboles de rendu.</p>
<p>Cliquez sur le bouton <strong>Classer</strong> pour générer les classes selon le mode choisi. Chaque classe peut être désactivée en décochant la case située à gauche du symbole de classe.</p>
<p>Vous pouvez changer le symbole, la valeur et / ou la légende en double-cliquant sur l&#8217;élément à modifier.</p>
<p>Un clic-droit vous propose de <strong>Copier / Coller</strong>, <strong>Modifier la couleur</strong>,  <strong>Modifier la transparence</strong>, <strong>Modifier l&#8217;unité de sortie</strong> ou <strong>Modifier la taille</strong>.</p>
<p>L&#8217;exemple de la figure <a class="reference internal" href="#figure-symbology-7">figure_symbology_7</a> montre le rendu gradué de la couche des rivières de l&#8217;échantillon de données de KADAS.</p>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p><strong>Cartes thématiques utilisant une expression</strong></p>
<p class="last">Les cartes thématiques faites avec le rendu Catégorisé ou Gradué peuvent désormais être créées en utilisant le résultat d&#8217;une expression. Dans la fenêtre Propriétés des couches vectorielles, le sélecteur de colonne accueille une fonction <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> <em class="guilabel">Définir une expression</em> de colonne. Alors maintenant, vous n&#8217;avez plus besoin d&#8217;écrire l&#8217;attribut de la classification dans une nouvelle colonne de votre table si vous souhaitez que l&#8217;attribut de classification soit un composite de plusieurs champs, ou une formule quelconque.</p>
</div>
<p id="index-4"><strong>Rendu basé sur un ensemble de règles</strong></p>
<p>Ce moteur de rendu est utilisé pour afficher toutes les entités d&#8217;une couche en utilisant un ensemble de règles prédéfinies dont la couleur reflète la manière dont une entité a été classée en fonction de ses attributs. Les règles sont définies par des expressions SQL. La fenêtre permet de regrouper les règles par type de filtre ou échelle de validité. Vous pouvez activer le rendu selon les niveaux de symboles ou arrêter le rendu à la première règle validée pour chaque entité.</p>
<p>L&#8217;exemple de la figure <a class="reference internal" href="#figure-symbology-8">figure_symbology_8</a> montre le rendu basé sur des règles pour la couche des rivières de l&#8217;échantillon de données de KADAS.</p>
<p>To create a rule, activate an existing row by double-clicking on it, or click on &#8216;+&#8217; and
click on the new rule. In the <em class="guilabel">Rule properties</em> dialog, you can define a label
for the rule. Press the <a class="reference internal" href="../../../_images/browsebutton.png"><img alt="browsebutton" src="../../../_images/browsebutton.png" style="width: 2.3em;" /></a> button to open the expression string builder. In
the <strong>Function List</strong>, click on <em class="guilabel">Fields and Values</em> to view all attributes of
the attribute table to be searched. To add an attribute to the field calculator <strong>Expression</strong> field,
double click its name in the <em class="guilabel">Fields and Values</em> list. Generally, you
can use the various fields, values and functions to construct the calculation
expression, or you can just type it into the box (see <a class="reference internal" href="expression.html#vector-expressions"><em>Expressions</em></a>).
You can create a new rule by copying and pasting an existing rule with the right mouse button.
You can also use the &#8216;ELSE&#8217; rule that will be run if none of the other
rules on that level match.
The rules appear in a tree hierarchy in the map legend. Just double-klick
the rules in the map legend and the Style menu of the layer properties appears showing the rule that
is the background for the symbol in the tree.</p>
<p id="figure-symbology-8"><strong>Figure Symbology 8:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/rulesymbol_ng_line.png" src="../../../_images/rulesymbol_ng_line.png" />
<p class="caption">Options du mode de rendu par Ensemble de Règles <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<span class="target" id="index-5"></span><p id="index-6"><strong>Déplacement de point</strong></p>
<p>Le rendu de Déplacement de point permet une visualisation de tous les points d&#8217;une couche, même si ceux-ci se superposent. Pour se faire, les symboles des points sont répartis en cercle autour d&#8217;un symbole central.</p>
<p id="figure-symbology-9"><strong>Figure Symbology 9:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/poi_displacement.png" src="../../../_images/poi_displacement.png" />
<p class="caption">Fenêtre Déplacement de points <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p><strong>Exporter le style d&#8217;une couche vecteur</strong></p>
<p class="last">Vous avez la possibilité d&#8217;exporter la symbologie d&#8217;une couche vecteur de KADAS vers les fichiers *.kml de Google, *.dxf et *.tab de MapInfo. Il suffit d&#8217;un clic droit sur la couche, puis de cliquer sur <em class="menuselection">Enregistrer sous ‣</em> pour spécifier le nom du fichier de sortie et son format. Dans la boîte de dialogue, utilisez l&#8217;option <em class="guilabel">Exporter la symbologie</em> pour enregistrer la symbologie comme <em class="menuselection">Symbologie de l&#8217;entité ‣</em> ou comme <em class="menuselection">Symbologie de la couche de symboles ‣</em>. Si vous avez utilisé des couches de symboles, il est recommandé d&#8217;utiliser le deuxième paramètre.</p>
</div>
<p id="index-7"><strong>Polygones inversés</strong></p>
<p>Le rendu en polygones inversés permet de définir un symbole à appliquer à l&#8217;extérieur des polygones de la couche. Vous pouvez alors choisir parmi des sous-mode de rendu. Il s&#8217;agit des mêmes que les principaux modes.</p>
<p id="figure-symbology-10"><strong>Figure Symbology 10:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/inverted_polygon_symbol.png" src="../../../_images/inverted_polygon_symbol.png" />
<p class="caption">Fenêtre du mode de rendu en Polygones Inversés <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p><strong>Basculer rapidement entre styles</strong></p>
<p class="last">Lorsque vous avez créé un des styles mentionnés ci-dessus vous pouvez faire un clic droit sur la couche et sélectionner <em class="menuselection">Styles ‣ Ajouter</em> pour sauver votre style. Vous pouvez maintenant basculer rapidement entre les styles que vous avez créés en utilisant de nouveau le menu <em class="menuselection">Styles ‣</em>.</p>
</div>
<p id="index-8"><strong>Carte de chaleur</strong></p>
<p>Avec le rendu de Carte de chaleur vous pouvez créer des cartes de chaleur en temps réel et dynamiques pour des couches (multi-)points. Vous pouvez définir le rayon de la carte de chaleur en pixels, mm ou unités cartographiques, choisir une rampe de couleur pour le style de carte de chaleur et utiliser une jauge pour choisir entre la vitesse du rendu et la qualité. Lorsque une entité est ajoutée ou retirée le rendu de carte de chaleur met automatiquement à jour le style de carte de chaleur.</p>
</div>
<div class="section" id="color-picker">
<span id="id1"></span><h3>Sélecteur de Couleur<a class="headerlink" href="#color-picker" title="Lien permanent vers ce titre">¶</a></h3>
<p>Indépendamment du type de style utilisé, la fenêtre <em class="guilabel">Sélectionner la couleur</em> s&#8217;affiche dès que vous cliquez pour modifier une couleur - de bordure ou de remplissage. Quatre onglets vous permettent de sélectionner une couleur via une <a class="reference internal" href="../../../_images/mIconColorBox.png"><img alt="mIconColorBox" src="../../../_images/mIconColorBox.png" style="width: 1.5em;" /></a> <sup>Palette de couleur</sup>, une <a class="reference internal" href="../../../_images/mIconColorWheel.png"><img alt="mIconColorWheel" src="../../../_images/mIconColorWheel.png" style="width: 1.5em;" /></a> <sup>Roue chromatique</sup>, des <a class="reference internal" href="../../../_images/mIconColorSwatches.png"><img alt="mIconColorSwatches" src="../../../_images/mIconColorSwatches.png" style="width: 1.5em;" /></a> <sup>Aplats de couleur</sup> ou un <a class="reference internal" href="../../../_images/mIconColorPicker.png"><img alt="mIconColorPicker" src="../../../_images/mIconColorPicker.png" style="width: 1.5em;" /></a> <sup>Sélecteur de couleur</sup>.</p>
<p>Quelle que soit la méthode de sélection, la couleur est toujours décrite en valeurs TSV (Teinte, Saturation, Valeur) et RVB (Rouge, Vert, Bleu). Il y a également la valeur d&#8217;<em class="guilabel">Opacité</em> pour régler le niveau de transparence. En bas à gauche de la fenêtre s&#8217;affiche la comparaison entre la couleur <em class="guilabel">Actuelle</em> et l&#8217;<em class="guilabel">Ancienne</em>. En bas à droite, vous avez la possibilité d&#8217;ajouter la couleur sélectionnée à un bouton de couleur.</p>
<p id="figure-color-picker-1"><strong>Figure color picker 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/color_picker_ramp.png" src="../../../_images/color_picker_ramp.png" />
<p class="caption">Onglet Palette de Couleur de la fenêtre de Sélectionner la couleur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Avec la <a class="reference internal" href="../../../_images/mIconColorBox.png"><img alt="mIconColorBox" src="../../../_images/mIconColorBox.png" style="width: 1.5em;" /></a> <sup>Palette de couleur</sup> ou la <a class="reference internal" href="../../../_images/mIconColorWheel.png"><img alt="mIconColorWheel" src="../../../_images/mIconColorWheel.png" style="width: 1.5em;" /></a> <sup>Roue chromatique</sup>, vous parcourez toutes les combinaisons de couleurs possibles. Il y a cependant d&#8217;autres possibilités. En utilisant les <cite>Aplats de couleur</cite> <a class="reference internal" href="../../../_images/mIconColorSwatches.png"><img alt="mIconColorSwatches" src="../../../_images/mIconColorSwatches.png" style="width: 1.5em;" /></a>, vous pouvez choisir à partir d&#8217;une liste prédéfinie. Cette liste correspond aux <em class="guilabel">Couleurs récentes</em>, aux <em class="guilabel">Couleurs standards</em> et aux <em class="guilabel">Couleurs du projet</em>.</p>
<p id="figure-color-picker-2"><strong>Figure color picker 2:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/color_picker_recent_colors.png" src="../../../_images/color_picker_recent_colors.png" />
<p class="caption">Onglet Aplats de couleur de la fenêtre Sélectionner la couleur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Une autre possibilité est d&#8217;utiliser le <a class="reference internal" href="../../../_images/mIconColorPicker.png"><img alt="mIconColorPicker" src="../../../_images/mIconColorPicker.png" style="width: 1.5em;" /></a> <sup>Sélecteur de couleur</sup> qui permet d’échantillonner une couleur directement avec le pointeur de la souris depuis n&#8217;importe quelle partie de l&#8217;interface de QGIS et depuis une autre application en appuyant sur la barre espace. Cet outil dépend du système d&#8217;exploitation et n&#8217;est pas fonctionnel pour le moment sur OSX.</p>
<div class="admonition tip" id="tip-quick-color-picker-copy-paste-colors">
<p class="first admonition-title">Astuce</p>
<p><strong>Raccourci pour la sélection de couleur + copier/coller des couleurs</strong></p>
<p class="last">Vous pouvez rapidement choisir une <em class="guilabel">Couleur récente</em>, une <em class="guilabel">Couleur standard</em> ou simplement <em class="guilabel">copier</em> / <em class="guilabel">coller</em> une couleur en cliquant sur la flèche située à droite du bouton qui affiche la couleur.</p>
</div>
<p id="figure-color-picker-3"><strong>Figure color picker 3:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/quick_color_picker.png" src="../../../_images/quick_color_picker.png" />
<p class="caption">Raccourci pour la sélection de couleur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
</div>
<div class="section" id="layer-rendering">
<h3>Rendu de couche<a class="headerlink" href="#layer-rendering" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first"><em class="guilabel">Transparence de la couche</em> <img alt="slider" src="../../../_images/slider.png" /> : permet de rendre visible les couches situées en dessous. Utiliser le curseur pour adapter la visibilité de la couche vectorielle à vos besoins. Vous pouvez également définir directement le pourcentage de transparence dans la zone de texte située à côté.</p>
</li>
</ul>
<ul class="simple" id="blend-modes">
<li><em class="guilabel">Layer blending mode</em> and <em class="guilabel">Feature blending mode</em>: You can achieve special rendering effects with these tools that you may
previously only know from graphics programs. The pixels of your overlaying and underlaying layers are mixed
through the settings described below.<ul>
<li><p class="first">Normal : il s&#8217;agit du mode de fusion standard qui utilise la valeur de transparence (canal alpha) du pixel supérieur pour le fusionner avec le pixel sous-jacent, les couleurs ne sont pas mélangées.</p>
</li>
<li><p class="first">Eclaircir : Sélectionne le maximum entre chaque composante depuis les pixels du premier-plan et de l&#8217;arrière-plan. Soyez attentif au fait que le résultat obtenu peut présenter un aspect dur et crénelé.</p>
</li>
<li><p class="first">Filtrer : Les pixels lumineux de la source sont affichés par dessus la destination, alors que les pixels sombres ne le sont pas. Ce mode est utile pour mélanger la texture d&#8217;une couche avec une autre (c&#8217;est-à-dire que vous pouvez utiliser un relief ombré pour texturer une autre couche).</p>
</li>
<li><p class="first">Eviter : Ce mode va éclaircir et saturer les pixels sous-jacents en se basant sur la luminosité du pixel au-dessus. La brillance des pixels supérieurs va donc provoquer une augmentation de la saturation et de la brillance des pixels inférieurs. Cela fonctionne mieux si les pixels supérieurs ne sont pas lumineux, sinon l&#8217;effet sera trop prononcé.</p>
</li>
<li><p class="first">Addition : Ce mode de fusion ajoute simplement les valeurs de pixels d&#8217;une couche avec une autre. Dans le cas de valeurs obtenues au-dessus de un (en ce qui concerne le RVB), du blanc sera affiché. Ce mode est approprié pour mettre en évidence des entités.</p>
</li>
<li><p class="first">Assombrir : Ce mode créé un pixel résultant qui conserve le plus petit composant parmi les pixels du premier-plan et de l&#8217;arrière-plan. Comme avec le mode éclaircir, le résultat peut présenter un aspect dur et crénelé.</p>
</li>
<li><p class="first">Multiplier : Dans ce cas, les valeurs pour chaque pixel de la couche supérieure sont multipliées par celles des pixels correspondants de la couche inférieure. Les images obtenues sont plus sombres.</p>
</li>
<li><p class="first">Découper : Les couleur sombres de la couche supérieure provoquent un obscurcissement des couches inférieures. Découper peut être utilisé pour ajuster et teinter les couches inférieures.</p>
</li>
<li><p class="first">Revêtement : Ce mode combine les modes multiplier et filtrer. Dans l&#8217;image résultante, les parties lumineuses deviennent plus lumineuses et les parties sombres plus sombres.</p>
</li>
<li><p class="first">Lumière douce : Ce mode est très similaire au mode revêtement, mais au lieu d&#8217;utiliser multiplier/filtrer il utilise découper/éviter. Il est censé émuler une lumière douce rayonnante dans l&#8217;image.</p>
</li>
<li><p class="first">Lumière dure : Ce mode est lui aussi très similaire au mode revêtement. Il est censé émuler une lumière très intense projetée dans l&#8217;image.</p>
</li>
<li><p class="first">Différencier : Ce mode soustrait le pixel supérieur au pixel inférieur et vice-versa, de façon à toujours obtenir une valeur positive. Le mélange avec du noir ne produit aucun changement, étant donné que toutes les couleurs sont nulles.</p>
</li>
<li><p class="first">Soutraire : Ce mode soustrait les valeurs de pixel d&#8217;une couche avec une autre. En cas de valeurs négatives obtenues, du noir est affiché.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="labels-menu">
<span id="vector-labels-tab"></span><span id="index-9"></span><h2>Onglet Étiquettes<a class="headerlink" href="#labels-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le moteur d&#8217;<a class="reference internal" href="../../../_images/mActionLabeling.png"><img alt="mActionLabeling" src="../../../_images/mActionLabeling.png" style="width: 1.5em;" /></a> <sup>Étiquettes</sup> fournit un système d&#8217;étiquetage intelligent pour les couches de points, lignes et polygones et ne nécessite que peu de paramètres. Ce nouveau système gère les couches reprojetées à la volée. Les fonctionnalités principales ont été re-designées et KADAS en propose de nouvelles qui améliorent l&#8217;étiquetage. Les menus suivants ont été créés pour les couches vectorielles :</p>
<ul class="simple">
<li><p class="first">Texte</p>
</li>
<li><p class="first">Formatage</p>
</li>
<li><p class="first">Tampon</p>
</li>
<li><p class="first">Fond</p>
</li>
<li><p class="first">Ombre</p>
</li>
<li><p class="first">Emplacement</p>
</li>
<li><p class="first">Rendu</p>
</li>
</ul>
<p>Voyons ce que l&#8217;on peut faire avec les nouveaux onglets pour chaque type de couche.</p>
<p id="labeling-point-layers"><strong>Étiqueter une couche de points</strong></p>
<p>Lancez KADAS et chargez une couche vectorielle de points. Sélectionnez la couche dans la légende et cliquez sur le bouton <a class="reference internal" href="../../../_images/mActionLabeling.png"><img alt="mActionLabeling" src="../../../_images/mActionLabeling.png" style="width: 1.5em;" /></a> <sup>Paramètres d&#8217;étiquetage de la couche</sup> de la barre d&#8217;outils KADAS.</p>
<p>La première étape consiste à cocher la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Étiqueter cette couche avec</em> et à sélectionner un champ attributaire à utiliser pour l&#8217;étiquette. Cliquez sur <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> si vous souhaitez définir les étiquettes en vous basant sur des expressions. Voir <a class="reference internal" href="#labeling-with-expressions">labeling_with_expressions</a>.</p>
<p>Les étapes présentées ci-dessous décrivent un étiquetage simple, sans utilisation des fonctions de <em class="guilabel">Valeurs définies par les données</em>, situées à droite des paramètres à définir.</p>
<p>Vous pouvez définir le style du texte dans le menu <em class="guilabel">Texte</em> (voir <a class="reference internal" href="#figure-labels-1">Figure_labels_1</a> ). Utilisez l&#8217;option <em class="guilabel">Casse</em> pour influencer le rendu du texte. Vous avez la possibilité d&#8217;afficher le texte &#8216;Tout en majuscules&#8217;, &#8216;Tout en minuscules&#8217; ou &#8216;Premières lettres en majuscules&#8217;. Utilisez le mode de fusion pour créer des effets bien connus des logiciels de graphisme (voir <a class="reference internal" href="#blend-modes">blend_modes</a>).</p>
<p>Dans le menu <em class="guilabel">Formatage</em>, vous pouvez définir un caractère de retour à la ligne afin de découper l&#8217;étiquette sur de multiples lignes. Utilisez l&#8217;option <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Nombres formatés</em> pour formater les valeurs numériques de la table attributaire. Les chiffres après la virgule sont insérés. L&#8217;activation de cette option ajoute par défaut trois chiffres après la virgule.</p>
<p>Pour créer un tampon, cochez simplement la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Afficher un tampon</em> depuis le menu <em class="guilabel">Tampon</em>. La couleur du tampon est personnalisable. Vous pouvez également appliquer un mode de fusion (voir <a class="reference internal" href="#blend-modes">blend_modes</a>).</p>
<p>Si la case à cocher <em class="guilabel">Colorier le remplissage du tampon</em> est activé, il va interagir avec le texte partiellement transparent et donner des résultats mitigés en matière de transparence de la couleur. La désactivation du remplissage du tampon corrige ce problème (sauf là où l&#8217;aspect intérieur du contour du tampon intersecte avec le texte de remplissage) et permet également de faire du texte encadré.</p>
<p>Dans le menu <em class="guilabel">Fond</em>, vous pouvez définir la forme de votre arrière-plan avec <em class="guilabel">Taille X</em> et <em class="guilabel">Taille Y</em>. Utilisez <em class="guilabel">Taille selon</em> pour ajouter une zone de  &#8216;Tampon&#8217; à votre arrière-plan. La taille du tampon est définie par défaut ici. Le fond est alors constitué de la zone tampon et du fond défini par les valeurs <em class="guilabel">Taille X</em> et <em class="guilabel">Taille Y</em>. Vous pouvez aussi définir une <em class="guilabel">Rotation</em> correspondant à &#8216;Angle de l&#8217;étiquette&#8217;, &#8216;Angle par rapport à l&#8217;étiquette&#8217; ou encore &#8216;Valeurs fixes&#8217;. Définissez un <em class="guilabel">Décalage X,Y</em> avec les valeurs X et Y et le fond sera déplacé. En appliquant <em class="guilabel">Angles arrondis X,Y</em>, l&#8217;arrière-plan s&#8217;arrondit aux angles. Il est également possible de fusionner le fond avec les couches sous-jacentes dans la fenêtre de carte en utilisant le <em class="guilabel">Mode de fusion</em> (voir <a class="reference internal" href="#blend-modes">blend_modes</a>).</p>
<p>Utilisez le menu <em class="guilabel">Ombre</em> pour une <em class="guilabel">Ombre portée</em> définie par l&#8217;utilisateur. Le dessin de l&#8217;arrière-plan est très variable. Choisissez entre &#8216;l&#8217;objet le plus bas de l&#8217;étiquette&#8217;, &#8216;Texte&#8217;, &#8216;Tampon&#8217; et &#8216;Fond&#8217;. L&#8217;angle du <em class="guilabel">Décalage</em> dépend de l&#8217;orientation de l&#8217;étiquette. Si vous cochez la  case <em class="guilabel">Utilise une ombre globale</em>, alors le point zéro de l&#8217;angle est toujours orienté vers le nord et ne dépend pas de l&#8217;orientation de l&#8217;étiquette. Vous pouvez influencer l&#8217;apparence de l&#8217;ombre avec le <em class="guilabel">Rayon d&#8217;estompage</em>. Plus le nombre sera faible et plus les ombres seront douces. L&#8217;apparence de l&#8217;ombre portée peut également être modifiée en choisissant un mode de fusion (voir <a class="reference internal" href="#blend-modes">blend_modes</a>).</p>
<p>Sélectionnez le menu <em class="guilabel">Emplacement</em> pour définir la position de l&#8217;étiquette et les priorités d&#8217;étiquetage. L&#8217;option <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Décalage par rapport au point</em> offre maintenant la possibilité d&#8217;utiliser les <em class="guilabel">Quadrants</em> pour placer l&#8217;étiquette. En outre, vous pouvez modifier l&#8217;orientation de l&#8217;étiquette avec l&#8217;option <em class="guilabel">Rotation</em>. Ainsi, un emplacement dans un quadrant donné avec une rotation donnée est désormais possible. Dans la section <em class="guilabel">Priorité</em> vous pouvez définir la priorité d&#8217;emplacement de l&#8217;étiquette. Elle interagit avec les étiquettes des autres couches vectorielles du canevas de cartes. S&#8217;il y a des étiquettes de couches différentes au même emplacement alors l&#8217;étiquette ayant la plus haute priorité sera affichée et les autres ne le seront pas.</p>
<p id="index-10">Dans le menu <em class="guilabel">Rendu</em>, vous pouvez définir des options d&#8217;étiquettes et d&#8217;entités. Sous <em class="guilabel">Options des étiquettes</em>, vous trouverez maintenant le paramètre de visibilité selon l&#8217;échelle. Vous pouvez empêcher KADAS de n&#8217;afficher qu&#8217;un certain nombre d&#8217;étiquettes à l&#8217;aide de l&#8217;option <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Afficher toutes les étiquettes pour cette couche (même celles en conflit)</em>. Sous <em class="guilabel">Options des entités</em>, vous pouvez définir si chaque partie d&#8217;une entité multi-parties doit avoir son étiquette. Il est possible de définir un nombre limite d&#8217;entités à étiqueter et d&#8217; <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Éviter que l&#8217;étiquette ne recouvre des objets</em>.</p>
<p id="figure-labels-1"><strong>Figure Labels 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/label_points.png" src="../../../_images/label_points.png" />
<p class="caption">Étiquetage d&#8217;une couche vectorielle de points <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p><strong>Étiqueter une couche de lignes</strong></p>
<p>La première étape consiste à cocher la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Etiqueter cette couche avec</em> dans l&#8217;onglet <em class="guilabel">Étiquettes</em> et à sélectionner un champ attributaire à utiliser pour l&#8217;étiquette. Cliquez sur <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> si vous souhaitez définir les étiquettes en vous basant sur des expressions. Voir <a class="reference internal" href="#labeling-with-expressions">labeling_with_expressions</a>.</p>
<p>Ensuite, vous pouvez définir le style de texte dans le menu <em class="guilabel">Texte</em>. Ici, les options sont identiques à celles proposées pour les couches de points.</p>
<p>De même, dans le menu <em class="guilabel">Formatage</em>, les paramètres sont identiques à ceux des couches de points.</p>
<p>Le menu <em class="guilabel">Tampon</em> offre les mêmes fonctions que celles définies dans la section <a class="reference internal" href="#labeling-point-layers">labeling_point_layers</a>.</p>
<p>Le menu <em class="guilabel">Fond</em> offre les mêmes entrées que celles définies dans la section <a class="reference internal" href="#labeling-point-layers">labeling_point_layers</a>.</p>
<p>Le menu <em class="guilabel">Ombre</em> offre les mêmes entrées que celles définies dans la section <a class="reference internal" href="#labeling-point-layers">labeling_point_layers</a>.</p>
<p>Dans le menu <em class="guilabel">Emplacement</em>, vous trouverez des options spécifiques aux couches de lignes. L&#8217;étiquette peut avoir un alignement <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Parallèle</em>, <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Courbé</em> ou <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Horizontal</em>. Avec les options <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Parallèle</em> et <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Courbé</em>, vous pouvez définir une position <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Au-dessus de la ligne</em>, <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Sur la ligne</em> ou <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">En-dessous de la ligne</em>. Il est possible de sélectionner plusieurs options à la fois. Dans ce cas, KADAS recherchera la position optimale pour l&#8217;étiquette. Sachez que vous pouvez aussi utiliser l&#8217;orientation de la ligne pour positionner l&#8217;étiquette. En outre, vous pouvez définir un <em class="guilabel">Angle maximal des lettres (étiquettes courbes)</em> lorsque vous optez pour un emplacement <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Courbé</em> (voir <a class="reference internal" href="#figure-labels-2">Figure_labels_2</a> ).</p>
<p>Vous pouvez définir une distance minimale pour répéter les étiquettes. Cette distance peut être en mm ou en unités de la carte.</p>
<p>Certaines configurations de placement proposeront plus d&#8217;options, par exemple, les Emplacements <em class="guilabel">Courbé</em> et <em class="guilabel">Parallèle</em> permettent de définir la position de l&#8217;étiquette (au-dessus, en-dessous ou sur la ligne), la <em class="guilabel">Distance</em> à la ligne et, pour <em class="guilabel">Courbé</em>, l&#8217;utilisateur peut aussi définir l&#8217;angle maximal interne/externe entre les étiquettes courbées. De la même façon que pour les couches de points vous avez la possibilité de définir une <em class="guilabel">Priorité</em> pour les étiquettes.</p>
<p>Le menu <em class="guilabel">Rendu</em> offre presque les mêmes fonctions que celles définies pour les couches de points. Dans les <em class="guilabel">Options des entités</em>, vous pouvez maintenant <em class="guilabel">Ne pas afficher d&#8217;étiquettes pour les entités plus petites que</em>.</p>
<p id="figure-labels-2"><strong>Figure Labels 2:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/label_line.png" src="../../../_images/label_line.png" />
<p class="caption">Étiquetage d&#8217;une couche vectorielle de lignes <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p><strong>Étiqueter une couche de polygones</strong></p>
<p>La première étape consiste à cocher la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Etiqueter cette couche avec</em> et à sélectionner un champ attributaire à utiliser pour l&#8217;étiquette. Cliquez sur <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> si vous souhaitez définir les étiquettes en vous basant sur des expressions. Voir <a class="reference internal" href="#labeling-with-expressions">labeling_with_expressions</a>.</p>
<p>Le menu <em class="guilabel">Texte</em> définit le style de texte. Les options proposées sont identiques à celles des couches de points et de lignes.</p>
<p>Le menu <em class="guilabel">Formatage</em> permet de formater l&#8217;étiquette sur des lignes multiples comme pour les couches de points ou de lignes.</p>
<p>Comme pour les points et les lignes, vous pouvez définir une zone tampon autour du texte dans le menu <em class="guilabel">Tampon</em>.</p>
<p>Utilisez le menu <em class="guilabel">Fond</em> pour créer des arrière-plans personnalisés pour les étiquettes de polygones. Ce menu est identique à celui des couches de points ou de lignes.</p>
<p>Les entrées du menu <em class="guilabel">Ombre</em> sont identiques à celles des couches de points ou de lignes.</p>
<p>Le menu <em class="guilabel">Emplacement</em> propose des options spécifiques aux couches de polygones (voir <a class="reference internal" href="#figure-labels-3">Figure_labels_3</a>). Il s&#8217;agit notamment de <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Décalage par rapport au centroïde</em>, <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Horizontal (lent)</em>, <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Autour du centroïde</em>, <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Libre (lent)</em> et <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Selon le périmètre</em>.</p>
<p>Avec l&#8217;option <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Décalage par rapport au centroïde</em>, vous pouvez définir si le centroïde est celui du <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">polygone visible</em> ou du <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">polygone complet</em>. Cela signifie que soit le centroïde utilisé correspond à celui de la portion de polygone qui apparaît dans votre carte, soit il est défini par rapport au polygone en entier, que vous l&#8217;ayez entièrement affiché dans votre carte ou pas. Vous pouvez placer l&#8217;étiquette selon les quadrants et définir un décalage et une rotation. L&#8217;option <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Autour du centroïde</em> permet de placer l&#8217;étiquette autour du centroïde, à une certaine distance. Là encore, il y a la possibilité de définir si le centroïde est <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">polygone visible</em> ou <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">polygone complet</em>. Avec l&#8217;option <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Selon le périmètre</em>, vous pouvez définir une position et une distance de placement pour l&#8217;étiquette. Les positions possibles sont <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Au-dessus de la ligne</em>, <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Sur la ligne</em>, <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">En-dessous de la ligne</em> et <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Orientation de la ligne suivant la position</em>.</p>
<p>En fonction du choix de la position des étiquettes, plusieurs options sont affichées. Vous pouvez ici choisir la distance au contour des polygones et l&#8217;intervalle de répétition des étiquettes sur le contour des polygones.</p>
<p>De la même façon que pour les couches vectorielles de points et de lignes vous avez le possibilité de définir une <em class="guilabel">Priorité</em> pour les couches vectorielles de polygones.</p>
<p>Le sous-menu <em class="guilabel">Rendu</em> propose les mêmes fonctions que celles définies pour les couches de lignes. Dans les <em class="guilabel">Options des entités</em>, vous pouvez choisir de <em class="guilabel">Ne pas afficher d&#8217;étiquettes pour les entités plus petites que</em>.</p>
<p id="figure-labels-3"><strong>Figure Labels 3:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/label_area.png" src="../../../_images/label_area.png" />
<p class="caption">Étiquetage d&#8217;une couche vectorielle de polygones <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p id="labeling-with-expressions"><strong>Défini des étiquettes basées sur des expressions</strong></p>
<p>QGIS permet d&#8217;utiliser des expressions pour étiqueter les entités. Cliquez sur l&#8217;icône <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> dans le menu <sup>Étiquettes</sup> <a class="reference internal" href="../../../_images/mActionLabeling.png"><img alt="mActionLabeling" src="../../../_images/mActionLabeling.png" style="width: 1.5em;" /></a> de la boîte de dialogue Propriétés. Sur <a class="reference internal" href="#figure-labels-4">figure_labels_4</a> vous pouvez voir un exemple d&#8217;expression pour étiqueter les régions de l&#8217;Alaska avec leur nom et leur superficie, en se basant sur le champ &#8216;NAME_2&#8217;, un texte de description et la fonction &#8216;$area()&#8217; en combinaison avec &#8216;format_number()&#8217; pour améliorer l&#8217;affichage numérique.</p>
<p id="figure-labels-4"><strong>Figure Labels 4:</strong></p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../_images/label_expression.png"><img alt="../../../_images/label_expression.png" src="../../../_images/label_expression.png" style="width: 30em;" /></a>
<p class="caption">Utiliser des expressions pour l&#8217;étiquetage <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>L&#8217;étiquetage basé sur des expressions est simple à utiliser. Tout ce dont vous avez à vous préoccuper est de combiner tous les éléments (chaînes de caractères, champs et fonctions) avec l&#8217;opérateur de concaténation || et que les champs soient entourés par des &#8220;apostrophes doubles &#8221; et les chaînes par des &#8216;apostrophes simples&#8217;. Voici quelques exemples :</p>
<div class="highlight-python"><pre> # label based on two fields 'name' and 'place' with a comma as separater
 "name" || ', ' || "place"

 -&gt; John Smith, Paris

 # label based on two fields 'name' and 'place' separated by comma
 'My name is ' || "name" || 'and I live in ' || "place"

 -&gt; My name is John Smith and I live in Paris

 # label based on two fields 'name' and 'place' with a descriptive text
 # and a line break (\n)
 'My name is ' || "name" || '\nI live in ' || "place"

 -&gt; My name is John Smith
    I live in Paris

 # create a multi-line label based on a field and the $area function
 # to show the place name and its area size based on unit meter.
 'The area of ' || "place" || 'has a size of ' || $area || 'm²'

 -&gt; The area of Paris has a size of 105000000 m²

 # create a CASE ELSE condition. If the population value in field
 # population is &lt;= 50000 it is a town, otherwise a city.
 'This place is a ' || CASE WHEN "population &lt;= 50000" THEN 'town' ELSE 'city' END

-&gt; This place is a town</pre>
</div>
<p>Comme vous pouvez le constater dans le constructeur d&#8217;expressions, vous avez à votre disposition une centaine de fonctions pour créer des expressions simples ou très complexes afin d&#8217;étiqueter vos données avec KADAS. Voir <a class="reference internal" href="expression.html#vector-expressions"><em>Expressions</em></a> pour plus d&#8217;informations et des exemples d&#8217;expressions.</p>
<p><strong>Utiliser des valeurs de paramètres définies par les données pour l&#8217;étiquetage</strong></p>
<p>Avec les fonctions de remplacement défini par les données, les paramètres de l&#8217;étiquetage sont remplacées par les entrées de la table d&#8217;attributs. Vous pouvez activer et désactiver cette fonction avec le bouton droit de la souris. Survolez le symbole et vous verrez les informations sur le remplacement des données définies, y compris le domaine de la définition actuelle. Nous décrivons maintenant un exemple d&#8217;utilisation de la fonction de correction de données défini pour la fonction <a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="mActionMoveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a>:sup: <cite>déplacement d&#8217;étiquette</cite>  (voir <a class="reference internal" href="#figure-labels-5">figure_labels_5</a>).</p>
<ol class="arabic simple">
<li><p class="first">Importez la couche <tt class="file docutils literal"><span class="pre">lakes.shp</span></tt> depuis le jeu de données test de KADAS.</p>
</li>
<li><p class="first">Double-cliquez la couche pour ouvrir la fenêtre des Propriétés. Sélectionnez <em class="guilabel">Etiquettes</em> puis <em class="guilabel">Emplacement</em> et enfin <img alt="radiobuttonon" src="../../../_images/radiobuttonon.png" /> <em class="guilabel">Décalage par rapport au centroïde</em>.</p>
</li>
<li><p class="first">Dans le cadre <em class="guilabel">Défini par les données</em>, cliquez sur l&#8217;icône <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="mIconDataDefine" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> pour définir le champ correspondant à la <em class="guilabel">coordonnée</em>. Choisissez &#8216;xlabel&#8217; pour X et &#8216;ylabel&#8217; pour Y. Les icônes revêtent maintenant une surbrillance jaune.</p>
</li>
<li><p class="first">Zoomez sur un lac.</p>
</li>
<li><p class="first">Sélectionnez l&#8217;outil <a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="mActionMoveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a> de la barre d&#8217;outils Étiquettes. Vous pouvez maintenant déplacer l&#8217;étiquette manuellement vers une autre position (voir <a class="reference internal" href="#figure-labels-6">figure_labels_6</a>). La nouvelle position est sauvegardée dans les colonnes &#8216;xlabel&#8217; et &#8216;ylabel&#8217; de votre table attributaire.</p>
</li>
</ol>
<p id="figure-labels-5"><strong>Figure Labels 5:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/label_data_defined.png" src="../../../_images/label_data_defined.png" />
<p class="caption">Étiquetage d&#8217;une couche vectorielle de polygones avec l&#8217;option &#8216;Défini par les données&#8217; <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p id="figure-labels-6"><strong>Figure Labels 6:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/move_label.png" src="../../../_images/move_label.png" />
<p class="caption">Déplacer des étiquettes <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
</div>
<div class="section" id="fields-menu">
<span id="vector-attributes-menu"></span><h2>Onglet Champs<a class="headerlink" href="#fields-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/attributes.png"><img alt="attributes" src="../../../_images/attributes.png" style="width: 2em;" /></a> Le menu <em class="guilabel">Champs</em> permet de manipuler les  champs attributaires du jeu de données sélectionné. Les boutons <a class="reference internal" href="../../../_images/mActionNewAttribute.png"><img alt="mActionNewAttribute" src="../../../_images/mActionNewAttribute.png" style="width: 1.5em;" /></a> : sup:<cite>Nouvelle colonne</cite> et <a class="reference internal" href="../../../_images/mActionDeleteAttribute.png"><img alt="mActionDeleteAttribute" src="../../../_images/mActionDeleteAttribute.png" style="width: 1.5em;" /></a> : sup:<cite>Effacer une colonne</cite> peuvent être utilisés lorsque la couche est en <a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="mActionToggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a> <sup>Mode édition</sup>.</p>
<p><strong>Outils d&#8217;édition</strong></p>
<p></p>
<p></p>
<p id="figure-fields-1"><strong>Figure Fields 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/editwidgetsdialog.png" src="../../../_images/editwidgetsdialog.png" />
<p class="caption">Fenêtre d&#8217;édition d&#8217;une colonne attributaire <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Dans le menu <em class="guilabel">Champs</em> se trouve également une colonne <strong>Outil d&#8217;édition</strong>. Cette colonne peut être utilisée pour définir des valeurs ou des plages de valeurs à utiliser pour ce champ précis de la table attributaire. Si vous cliquez sur <strong>[Outil d&#8217;édition]</strong>, il s&#8217;ouvre une fenêtre de dialogue dans laquelle vous pouvez définir différentes modalités. Celles-ci sont :</p>
<ul class="simple">
<li><p class="first"><strong>Boîte à cocher</strong> : Affiche une case à cocher et vous pouvez définir quelle valeur stocker quand la case est cochée ou pas.</p>
</li>
<li><p class="first"><strong>Classification</strong> : Affiche une liste déroulante avec les valeurs utilisées pour la classification, si vous avez choisi le style &#8216;Catégorisé&#8217; dans l&#8217;onglet <em class="guilabel">Style</em> de la fenêtre de propriétés.</p>
</li>
<li><p class="first"><strong>Couleur</strong> : Affiche un bouton de couleur permettant de choisir une couleur via la fenêtre Sélectionner une couleur.</p>
</li>
<li><p class="first"><strong>Date/Heure</strong> : Affiche un champ de type date/heure qui peut ouvrir un calendrier permettant de choisir une date, une heure ou les deux. Le champ doit être de type texte. Vous pouvez choisir un format personnalisé, l&#8217;affichage d&#8217;un calendrier, etc.</p>
</li>
<li><p class="first"><strong>Énumération</strong> : Ouvre une liste déroulante avec les valeurs qui peuvent être utilisées selon la définition du type de champ. Ce mode d&#8217;édition n&#8217;est actuellement disponible que pour les couches PostgreSQL.</p>
</li>
<li><p class="first"><strong>Nom de fichier</strong> : Simplifie la sélection d&#8217;un fichier par l&#8217;ouverture d&#8217;un explorateur de fichiers.</p>
</li>
<li><p class="first"><strong>Cachée</strong> : Un attribut caché sera invisible. L&#8217;utilisateur ne pourra pas visualiser son contenu.</p>
</li>
<li><p class="first"><strong>Photo</strong> : Champ contenant le nom d&#8217;un fichier de photo. La largeur et la hauteur peuvent être précisées.</p>
</li>
<li><p class="first"><strong>Plage</strong> : Vous permet de spécifier une plage de valeurs numériques disponibles. Il peut s&#8217;agir d&#8217;une barre coulissante ou d&#8217;une zone de texte éditable.</p>
</li>
<li><p class="first"><strong>Référence de la relation</strong>: Ce widget vous permet d&#8217;incorporer le formulaire d&#8217;entités de la couche référencée dans le formulaire de la couche courante. <em class="xref std std-ref">vector_relations</em>.</p>
</li>
<li><p class="first"><strong>Édition de texte</strong> (par défait) : Ceci permet l&#8217;édition d&#8217;un texte simple ou multi-ligne. Si vous choisissez Multi-ligne, vous pouvez spécifier s&#8217;il s&#8217;agit d&#8217;un contenu en HTML.</p>
</li>
<li><p class="first"><strong>Valeurs uniques</strong> : Vous pouvez sélectionner l&#8217;une des valeurs déjà utilisées dans cette colonne. Une ligne est affichée avec le support de l&#8217;auto-complétion si la case &#8216;Éditable&#8217; est cochée, une boîte de saisie est utilisée sinon.</p>
</li>
<li><p class="first"><strong>Générateur d&#8217;UUID</strong> : Champ en lecture seule qui génère un UUID (Identifiant Unique Universel) lorsqu&#8217;il est vide.</p>
</li>
<li><p class="first"><strong>Liste de valeurs</strong> : Une liste déroulante avec des valeurs prédéfinies. La valeur est stockée dans l&#8217;attribut, la description est affichée dans la liste. Vous pouvez définir des valeurs manuellement ou les charger depuis la couche ou depuis un fichier CSV.</p>
</li>
<li><p class="first"><strong>Valeur relationnelle</strong> : Propose les valeurs stockées dans un champ d&#8217;une autre table. Vous choisissez la table, le champ clé et le champ de valeur.</p>
</li>
<li><p class="first"><strong>Vue web</strong> : Champ contenant une URL. La largeur et la hauteur sont variables.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">KADAS has an advanced &#8216;hidden&#8217; option to define your own field
widget using python and add it to this impressive list of widgets.
It is tricky but it is very well explained in following excellent blog that
explains how to create a real time validation widget that can be used like
described widgets.
See <a class="reference external" href="http://blog.vitu.ch/10142013-1847/write-your-own-qgis-form-elements">http://blog.vitu.ch/10142013-1847/write-your-own-qgis-form-elements</a></p>
</div>
<p>Avec <strong>l&#8217;Éditeur de mise en page des attributs</strong> vous pouvez maintenant définir des formulaires intégrés (voir <a class="reference internal" href="#figure-fields-2">figure_fields_2</a>). C&#8217;est utile pour les travaux de saisie de données ou pour identifier des objets en utilisant l&#8217;option d&#8217;ouverture automatique du formulaire lorsqu&#8217;il y a des objets ayant beaucoup d&#8217;attributs. Vous pouvez créer un éditeur ayant plusieurs onglets et groupes nommés pour présenter les champs d&#8217;attributs.</p>
<p>Choose &#8216;Drag and drop designer&#8217; and an attribute column. Use the <a class="reference internal" href="../../../_images/mActionSignPlus.png"><img alt="mActionSignPlus" src="../../../_images/mActionSignPlus.png" style="width: 1.5em;" /></a> icon to create
a category to insert a tab or a named group (see <a class="reference internal" href="#figure-fields-3">figure_fields_3</a>).
When creating a new category, KADAS will insert a new tab or named group for the category in the built-in form.
The next step will be to assign the relevant fields to a selected category
with the <a class="reference internal" href="../../../_images/mActionArrowRight.png"><img alt="mActionArrowRight" src="../../../_images/mActionArrowRight.png" style="width: 1.5em;" /></a> icon. You can create more categories and use the
same fields again.</p>
<p>Other options in the dialog are &#8216;Autogenerate&#8217; and &#8216;Provide ui-file&#8217;.</p>
<ul class="simple">
<li>&#8216;Autogenerate&#8217; just creates editors for all fields and tabulates them.</li>
<li>The &#8216;Provide ui-file&#8217; option allows you to use complex dialogs made with the Qt-Designer.
Using a UI-file allows a great deal of freedom in creating a dialog.
For detailed information, see <a class="reference external" href="http://nathanw.net/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/">http://nathanw.net/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/</a>.</li>
</ul>
<p>Les fenêtres de KADAS peuvent être associées à une fonction Python qui peut être appelée à l&#8217;ouverture de la fenêtre. Utilisez cette fonction pour ajouter des éléments supplémentaires à vos fenêtres. Un exemple est (dans le module MyForms.py):</p>
<div class="highlight-python"><pre>def open(dialog,layer,feature):
geom = feature.geometry()
control = dialog.findChild(QWidged,"My line edit")</pre>
</div>
<p>Référence à la Fonction Python Init comme ceci : MyForms.open</p>
<p>Le fichier MyForms.py doit être présent dans le PYTHONPATH, dans le dossier .qgis2/python ou dans le dossier du projet.</p>
<p id="figure-fields-2"><strong>Figure Fields 2:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/attribute_editor_layout.png" src="../../../_images/attribute_editor_layout.png" />
<p class="caption">Fenêtre de création de catégories avec la <strong>Mise en page de l&#8217;éditeur d&#8217;attribut</strong></p>
</div>
<p id="figure-fields-3"><strong>Figure Fields 3:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/resulting_feature_form.png" src="../../../_images/resulting_feature_form.png" />
<p class="caption">Formulaire intégré obtenu avec onglets et groupes nommés</p>
</div>
</div>
<div class="section" id="general-menu">
<span id="vectorgeneralmenu"></span><h2>Onglet Général<a class="headerlink" href="#general-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/general.png"><img alt="general" src="../../../_images/general.png" style="width: 2em;" /></a> Utilisez cet onglet pour définir les paramètres généraux de la couche vecteur. Plusieurs options sont disponibles :</p>
<p>Informations sur la couche</p>
<ul class="simple">
<li><p class="first">Changez le nom affiché de la couche dans <em class="guilabel">Nom de la couche</em></p>
</li>
<li><p class="first">Définissez le fichier <em class="guilabel">Source de la couche</em> vectorielle</p>
</li>
<li><p class="first">Définissez l&#8217;<em class="guilabel">Encodage de la source des données</em> pour spécifier le type d&#8217;encodage utilisé dans les données source et pour pouvoir les lire correctement</p>
</li>
</ul>
<p>Système de Coordonnées de Référence</p>
<ul class="simple">
<li><p class="first"><em class="guilabel">Sélectionner le SCR</em>, système de coordonnées de référence. Ici vous pouvez visualiser ou modifier le SCR de la couche.</p>
</li>
<li><p class="first"><em class="guilabel">Créer un index spatial</em> (uniquement pour les formats gérés par OGR),</p>
</li>
<li><p class="first"><em class="guilabel">Mettre à jour l&#8217;emprise</em> dans les informations de la couche,</p>
</li>
<li><p class="first">Voir ou modifier la projection de la couche vecteur en cliquant sur <em class="guilabel">Sélectionner le SCR</em></p>
</li>
</ul>
<p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Visibilité dépendante de l&#8217;échelle</em></p>
<ul class="simple">
<li><p class="first">Vous pouvez définir les échelles <em class="guilabel">Maximum (inclusif)</em> et <em class="guilabel">Minimum (exclusif)</em> de visualisation de la couche. Les échelles peuvent être définies via les boutons <strong>[Un outil pour définir l&#8217;échelle de visibilité]</strong>.</p>
</li>
</ul>
<p>Sous-ensemble de la couche</p>
<ul class="simple">
<li><p class="first">Le bouton <strong>[Constructeur de requête]</strong> permet de définir un sous-ensemble de la couche qui sera visualisé en lieu et place de la couche complète (référez-vous également à la section <em class="xref std std-ref">vector_query_builder</em>).</p>
</li>
</ul>
<p id="figure-general-vect"><strong>Figure General 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/vector_general_menu.png" src="../../../_images/vector_general_menu.png" />
<p class="caption">Onglet Général de la fenêtre de Propriétés d&#8217;une couche vecteur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
</div>
<div class="section" id="rendering-menu">
<h2>Onglet Rendu<a class="headerlink" href="#rendering-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p>KADAS supports for on-the-fly feature generalisation. This can improve rendering times
when drawing many complex features at small scales. This feature can be enabled or disabled in the
layer settings using the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Simplify geometry</em> option. There is also a new global
setting that enables generalisation by default for newly added layers (see section <a class="reference internal" href="../introduction/qgis_configuration.html#gui-options"><em>Options</em></a>).
<strong>Note</strong>: Feature generalisation may introduce artefacts into your rendered output in some cases.
These may include slivers between polygons and inaccurate rendering when using offset-based symbol layers.</p>
</div>
<div class="section" id="display-menu">
<h2>Onglet Infobulles<a class="headerlink" href="#display-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/mActionMapTips.png"><img alt="mActionMapTips" src="../../../_images/mActionMapTips.png" style="width: 1.5em;" /></a> Cet onglet est spécialement créé pour les infobulles. Il inclut une nouvelle fonctionnalité : les infobulles qui affichent du texte en HTML. Alors que vous pouvez toujours choisir un <img alt="radiobuttonoff" src="../../../_images/radiobuttonoff.png" /> <em class="guilabel">Champ</em> à afficher lors du survol d&#8217;une entité sur la carte, il est maintenant possible d&#8217;insérer du code HTML qui crée un affichage complexe. Pour activer les infobulles, sélectionnez l&#8217;option de menu <em class="menuselection">Vue‣ Infobulles</em>. La figure 1 montre un exemple de code HTML.</p>
<p id="figure-display-1"><strong>Figure Display 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/display_html.png" src="../../../_images/display_html.png" />
<p class="caption">Code HTML pour les infobulles <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p id="figure-display-2"><strong>Figure Display 2:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/map_tip.png" src="../../../_images/map_tip.png" />
<p class="caption">Infobulles basées sur du code HTML <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
</div>
<div class="section" id="actions-menu">
<h2>Onglet Actions<a class="headerlink" href="#actions-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/action.png"><img alt="action" src="../../../_images/action.png" style="width: 2em;" /></a> KADAS est capable d&#8217;effectuer des actions basées sur les attributs d&#8217;une entité. Il peut s&#8217;agir de nombreuses actions, par exemple exécuter un programme avec des arguments construits à partir des attributs d&#8217;une entité, ou encore, passer des paramètres à un outil de publication de rapports sur internet.</p>
<p id="figure-actions-1"><strong>Figure Actions 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/action_dialog.png" src="../../../_images/action_dialog.png" />
<p class="caption">Vue d&#8217;ensemble de la fenêtre Actions avec quelques exemples d&#8217;actions <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Les actions sont utiles si vous voulez exécuter fréquemment une application externe ou charger une page web basée sur une ou plusieurs valeurs de votre couche vecteur. Il en existe six types  qui peuvent être utilisés de la sorte :</p>
<ul class="simple">
<li><p class="first">Les actions de type Générique, Mac, Windows et Unix lancent un processus externe.</p>
</li>
<li><p class="first">Les actions Python lancent un code Python.</p>
</li>
<li><p class="first">Les actions de type Générique et Python sont disponibles quel que soit le système d&#8217;exploitation.</p>
</li>
<li><p class="first">Les actions Mac, Windows et Unix sont disponibles uniquement depuis les systèmes d&#8217;exploitation correspondants (c&#8217;est à dire que vous pouvez définir trois actions &#8216;Éditer&#8217; qui ouvrent un éditeur et les utilisateurs ne verront que l&#8217;action correspondant à leur système d&#8217;exploitation).</p>
</li>
</ul>
<p>Quelques exemples d&#8217;actions sont fournis. Vous pouvez les charger en cliquant sur <strong>[Ajouter les actions par défaut]</strong>. Un des exemples effectue une recherche basée sur la valeur d&#8217;un attribut. C&#8217;est ce qui est développé par la suite.</p>
<p id="index-11"><strong>Définir des actions</strong></p>
<p>Les actions sur les attributs sont définies depuis la fenêtre <em class="guilabel">Propriétés de la couche</em> vecteur. Pour <span class="target" id="index-22"></span>définir une action, ouvrez la fenêtre <em class="guilabel">Propriétés de la couche</em> vecteur et cliquez sur le menu <em class="guilabel">Actions</em>. Allez à <em class="guilabel">Propriétés de l&#8217;action</em>. Sélectionnez le type &#8216;Générique&#8217; et fournissez un nom d&#8217;identification à l&#8217;action. Le texte de l&#8217;action doit lui-même contenir le nom de l&#8217;application qui sera exécutée lorsque l&#8217;action est invoquée. Vous pouvez ajouter un ou plusieurs champs en arguments pour l&#8217;application. Lorsque l&#8217;action est invoquée, tout jeu de caractères commençant par <tt class="docutils literal"><span class="pre">%</span></tt> suivi d&#8217;un champ sera remplacé par la valeur de ce champ. Les caractères spéciaux <span class="target" id="index-23"></span>%% sont remplacés par la valeur du champ sélectionné dans la fenêtre <em class="guilabel">Identifier les résultats</em> ou dans la <em class="guilabel">Table attributaire</em> ( voir <a class="reference internal" href="#using-actions">using_actions</a> ci-après). Les guillemets double peuvent être utilisés pour regrouper le texte dans un argument unique pour l&#8217;application, le script ou le programme. Ils sont ignorés lorsque précédés d&#8217;un antislash.</p>
<p>Si vous avez des noms de champs qui sont contenus dans d&#8217;autres noms de champs (par exemple, <tt class="docutils literal"><span class="pre">col1</span></tt> et <tt class="docutils literal"><span class="pre">col10</span></tt>), vous devez l&#8217;indiquer en entourant le nom de champ (le caractère %) par des crochets (par exemple <tt class="docutils literal"><span class="pre">[%col10]</span></tt>). Ceci évitera de prendre le nom de champ <tt class="docutils literal"><span class="pre">%col10</span></tt> pour <tt class="docutils literal"><span class="pre">%col1</span></tt> avec un <tt class="docutils literal"><span class="pre">0</span></tt> à la fin. Les crochets seront retirés quand QGIS substituera le nom par la valeur du champ. Si vous voulez que le champ à substituer soit entouré de crochets, utilisez un deuxième jeu de crochets comme ceci : <tt class="docutils literal"><span class="pre">[[%col10]]</span></tt>.</p>
<p>En utilisant l&#8217;outil <em class="guilabel">Identifier les entités</em>, vous ouvrez la fenêtre <em class="guilabel">Identifier les résultats</em>. Elle inclut une entrée <em>(Dérivé)</em> qui contient des informations pertinentes selon le type de couche. Les valeurs de cette entrée sont accessibles de la même manière que les autres champs en ajoutant <tt class="docutils literal"><span class="pre">(Derived).</span></tt> avant le nom du champ. Par exemple, une couche de points a un champ <tt class="docutils literal"><span class="pre">X</span></tt> et <tt class="docutils literal"><span class="pre">Y</span></tt> et leurs valeurs peuvent être utilisées dans l&#8217;action avec <tt class="docutils literal"><span class="pre">%(Derived).X</span></tt> et <tt class="docutils literal"><span class="pre">%(Derived).Y</span></tt>. Les attributs dérivés sont disponibles uniquement depuis la fenêtre <em class="guilabel">Identifier les résultats</em> mais pas par la <em class="guilabel">Table d&#8217;attributs</em>.</p>
<p>Deux <span class="target" id="index-24"></span>exemples d&#8217;action sont proposés ci-dessous :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">konqueror</span> <span class="pre">http://www.google.com/search?q=%nam</span></tt></li>
<li><tt class="docutils literal"><span class="pre">konqueror</span> <span class="pre">http://www.google.com/search?q=%%</span></tt></li>
</ul>
<p>Dans le premier exemple, le navigateur internet konqueror est lancé avec une URL. L&#8217;URL effectue une recherche Google sur la valeur du champ <tt class="docutils literal"><span class="pre">nam</span></tt> de la couche vecteur. Notez que l&#8217;application ou le script appelé par l&#8217;action doit être dans le path sinon vous devez fournir le chemin complet vers l&#8217;application. Pour être certain, nous pouvons réécrire le premier exemple de cette manière : <tt class="docutils literal"><span class="pre">/opt/kde3/bin/konqueror</span> <span class="pre">http://www.google.com/search?q=%nam</span></tt>. Ceci assurera que l&#8217;application konqueror sera exécutée quand l&#8217;action sera invoquée.</p>
<p>Le deuxième exemple utilise la notation %% dont la valeur ne dépend pas d&#8217;un champ en particulier. Quand l&#8217;action est invoquée, %% sera remplacé par la valeur du champ sélectionné dans les résultats de l&#8217;identification ou dans la table d&#8217;attributs.</p>
<p id="using-actions"><strong>Utiliser les actions</strong></p>
<p>Les actions se lancent depuis la fenêtre <em class="guilabel">Identifier les résultats</em>, depuis la <em class="guilabel">Table d&#8217;attributs</em> ou depuis  <em class="guilabel">Exécuter l&#8217;action de l&#8217;entité</em> (rappelez-vous que ces fenêtres s&#8217;ouvrent en cliquant sur <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="mActionIdentify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>Identifier les entités</sup>, <a class="reference internal" href="../../../_images/mActionOpenTable.png"><img alt="mActionOpenTable" src="../../../_images/mActionOpenTable.png" style="width: 1.5em;" /></a> <sup>Ouvrir la table d&#8217;attributs</sup> ou <a class="reference internal" href="../../../_images/mAction.png"><img alt="mAction" src="../../../_images/mAction.png" style="width: 1.5em;" /></a> <sup>Exécuter l&#8217;action de l&#8217;entité</sup>). Pour lancer une action, faites un clic droit sur un enregistrement et choisissez l&#8217;action depuis le menu qui apparaît. Les actions sont listées dans le menu par le nom que vous leur avez donné en les définissant. Cliquez ensuite sur l&#8217;action que vous souhaitez lancer.</p>
<p>Si vous faites appel à une action qui utilise la notation <tt class="docutils literal"><span class="pre">%%</span></tt>, faites un clic droit sur la valeur du champ que vous souhaitez passer à l&#8217;application ou au script, dans la fenêtre <em class="guilabel">Identifier les résultats</em> ou dans la <em class="guilabel">Table attributaire</em>.</p>
<p>Voici un autre exemple qui récupère des données d&#8217;une couche vecteur et qui les insère dans un fichier utilisant bash et la commande <tt class="docutils literal"><span class="pre">echo</span></tt> (cela ne marchera que sur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a> et peut-être <a class="reference internal" href="../../../_images/osx.png"><img alt="osx" src="../../../_images/osx.png" style="width: 1em;" /></a>). La couche en question a des champs pour le nom d&#8217;espèce <tt class="docutils literal"><span class="pre">taxon_name</span></tt>, la latitude <tt class="docutils literal"><span class="pre">lat</span></tt> et la longitude <tt class="docutils literal"><span class="pre">long</span></tt>. Nous souhaiterions faire une sélection spatiale de localisations et exporter les valeurs des enregistrements sélectionnés dans un fichier texte (ils apparaissent en jaune sur la carte dans QGIS). Voici l&#8217;action qui permettra de le faire :</p>
<div class="highlight-python"><pre>bash -c "echo \"%taxon_name %lat %long\" &gt;&gt; /tmp/species_localities.txt"</pre>
</div>
<p>Après avoir sélectionné quelques localités et lancé l&#8217;action sur chacune d&#8217;entre elles, le fichier de destination ressemblera à ceci :</p>
<div class="highlight-python"><pre>Acacia mearnsii -34.0800000000 150.0800000000
Acacia mearnsii -34.9000000000 150.1200000000
Acacia mearnsii -35.2200000000 149.9300000000
Acacia mearnsii -32.2700000000 150.4100000000</pre>
</div>
<p>Comme exercice, nous allons créer une action qui réalise une recherche Google sur la couche <tt class="docutils literal"><span class="pre">lakes</span></tt>. Tout d&#8217;abord, nous avons besoin de déterminer l&#8217;URL nécessaire pour effectuer une recherche sur un mot clé. Il suffit simplement d&#8217;aller sur Google et faire une recherche simple puis récupérer l&#8217;URL dans la barre d&#8217;adresse de votre navigateur. De cela, nous en déduisons la formulation : <a class="reference external" href="http://google.com/search?q=qgis">http://google.com/search?q=qgis</a>, où <tt class="docutils literal"><span class="pre">qgis</span></tt> est le terme recherché. À partir de tout cela, nous pouvons poursuivre :</p>
<ol class="arabic">
<li><p class="first">Assurez-vous que la couche <tt class="docutils literal"><span class="pre">lakes</span></tt> est chargée.</p>
</li>
<li><p class="first">Ouvrez la fenêtre <em class="guilabel">Propriétés de la couche</em> en double cliquant sur la couche dans la légende ou en faisant un clic droit et en choisissant <em class="guilabel">Propriétés</em> dans le menu qui apparaît.</p>
</li>
<li><p class="first">Cliquez sur l&#8217;onglet <em class="guilabel">Actions</em></p>
</li>
<li><p class="first">Entrez un nom pour l&#8217;action, par exemple <tt class="docutils literal"><span class="pre">Recherche</span> <span class="pre">Google</span></tt>.</p>
</li>
<li><p class="first">Pour l&#8217;action, nous devons fournir le nom du programme externe à lancer. Dans ce cas, nous allons utiliser Firefox. Si le programme n&#8217;est pas dans votre path, vous devez fournir le chemin complet.</p>
</li>
<li><p class="first">A la suite du nom de l&#8217;application externe, ajoutez l&#8217;URL utilisée pour faire la recherche Google, jusqu&#8217;au terme de recherche, mais sans l&#8217;ajouter : <tt class="docutils literal"><span class="pre">http://google.com/search?q=</span></tt></p>
</li>
<li><p class="first">Le texte dans le champ <em class="guilabel">Action</em> devrait ressembler à ceci : <tt class="docutils literal"><span class="pre">firefox</span> <span class="pre">http://google.com/search?q=</span></tt></p>
</li>
<li><p class="first">Cliquez sur le menu déroulant contenant les noms des champs pour la couche <tt class="docutils literal"><span class="pre">lakes</span></tt>. Il est situé juste à gauche du bouton <strong>[Insérer un champ]</strong>.</p>
</li>
<li><p class="first">Sélectionnez le champ &#8216;NAMES&#8217; du menu déroulant et cliquez sur <strong>[Insérer un champ]</strong>.</p>
</li>
<li><p class="first">Votre texte Action ressemble maintenant à :</p>
<p><tt class="docutils literal"><span class="pre">firefox</span> <span class="pre">http://google.com/search?q=%NAMES</span></tt></p>
</li>
<li><p class="first">Pour finaliser l&#8217;action, cliquez sur le bouton <strong>[Ajouter l&#8217;action à la liste]</strong>.</p>
</li>
</ol>
<p>L&#8217;action est donc entièrement définie et prête à être utilisée. Le texte final de l&#8217;action devrait correspondre à ça :</p>
<div class="highlight-python"><pre>firefox http://google.com/search?q=%NAMES</pre>
</div>
<p>Nous pouvons maintenant utiliser l&#8217;action. Fermez la fenêtre <em class="guilabel">Propriétés de la couche</em> et zoomez sur une zone d&#8217;intérêt. Assurez-vous que la couche <tt class="docutils literal"><span class="pre">lakes</span></tt> est active puis identifiez un lac. Dans la fenêtre de résultats, vous constatez que notre action est maintenant visible :</p>
<p id="figure-actions-2"><strong>Figure Actions 2:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/action_identifyaction.png" src="../../../_images/action_identifyaction.png" />
<p class="caption">Sélection de l&#8217;entité et choix de l&#8217;action <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Quand vous cliquez sur l&#8217;action, cela ouvre Firefox et charge l&#8217;URL <a class="reference external" href="http://www.google.com/search?q=Tustumena">http://www.google.com/search?q=Tustumena</a>. Il est également possible d&#8217;ajouter d&#8217;autres champs attributs à l&#8217;action. Pour faire cela, vous pouvez ajouter un <tt class="docutils literal"><span class="pre">+</span></tt> à la fin du texte de l&#8217;action, sélectionnez un autre champ et cliquez sur <strong>[Insérer un champ]</strong>. Dans cet exemple, la recherche sur un autre champ n&#8217;aurait pas de sens.</p>
<p>Vous pouvez définir de multiples actions pour une couche et chacune apparaitra dans la fenêtre <em class="guilabel">Identifier les résultats</em>.</p>
<p>Vous pouvez imaginer toutes sortes d&#8217;utilisations pour ces actions. Par exemple, si vous avez une couche de points contenant la localisation d&#8217;images ou de photos ainsi qu&#8217;un nom de fichier, vous pouvez créer une action qui lancera un visualiseur pour afficher les images. Vous pouvez également utiliser les actions pour lancer des rapports sur internet pour un champ attributaire ou une combinaison de champs, en les spécifiant de la même manière que dans l&#8217;exemple d&#8217;une recherche Google.</p>
<p>Nous pouvons également fournir des exemples plus complexes, notamment sur la manière d&#8217;utiliser des actions <strong>Python</strong>.</p>
<p>D&#8217;ordinaire, lorsque l&#8217;on crée une action pour ouvrir un fichier avec une application externe, on peut utiliser un chemin absolu ou relatif. Dans ce dernier cas, le chemin dépend donc de l&#8217;emplacement du fichier d&#8217;exécution du programme externe. Mais si nous souhaitons utiliser des chemins relatifs à la couche sélectionnée (stockée sous forme de fichier comme un shapefile ou une base SpatiaLite) ? Le code suivant permet de le faire :</p>
<div class="highlight-python"><pre>command = "firefox";
imagerelpath = "images_test/test_image.jpg";
layer = qgis.utils.iface.activeLayer();
import os.path;
layerpath = layer.source() if layer.providerType() == 'ogr'
  else (qgis.core.QgsDataSourceURI(layer.source()).database()
  if layer.providerType() == 'spatialite' else None);
path = os.path.dirname(str(layerpath));
image = os.path.join(path,imagerelpath);
import subprocess;
subprocess.Popen( [command, image ] );</pre>
</div>
<p>Il faut simplement se rappeler qu&#8217;il s&#8217;agit d&#8217;une action <em>Python</em> et qu&#8217;il faut modifier les variables <em>command</em> et <em>imagerelpath</em> selon vos besoins.</p>
<p>Et si le chemin relatif doit dépendre du fichier de projet (sauvegardé) ? Le code de l&#8217;action Python deviendra :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">command</span><span class="o">=</span><span class="s">&quot;firefox&quot;</span><span class="p">;</span>
<span class="n">imagerelpath</span><span class="o">=</span><span class="s">&quot;images/test_image.jpg&quot;</span><span class="p">;</span>
<span class="n">projectpath</span><span class="o">=</span><span class="n">qgis</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">fileName</span><span class="p">();</span>
<span class="kn">import</span> <span class="nn">os.path</span><span class="p">;</span> <span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">projectpath</span><span class="p">))</span> <span class="k">if</span> <span class="n">projectpath</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span> <span class="k">else</span> <span class="bp">None</span><span class="p">;</span>
<span class="n">image</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">imagerelpath</span><span class="p">);</span>
<span class="kn">import</span> <span class="nn">subprocess</span><span class="p">;</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span> <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">image</span> <span class="p">]</span> <span class="p">);</span>
</pre></div>
</div>
<p>Un autre exemple d&#8217;action Python consiste à ajouter de nouvelles couche au projet. L&#8217;exemple qui suit montre comment ajouter une couche vecteur et un raster. Les noms des fichiers à ajouter au projet et les noms à donner aux couches dépendent de données attributaires (<em>filename</em> et <em>layername</em> sont deux champs de la table attributaire de la couche sur laquelle l&#8217;action est créée) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addVectorLayer</span><span class="p">(</span><span class="s">&#39;/yourpath/[% &quot;filename&quot; %].shp&#39;</span><span class="p">,</span><span class="s">&#39;[% &quot;layername&quot; %]&#39;</span><span class="p">,</span>
  <span class="s">&#39;ogr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour ajouter un raster (ici une image TIF), cela devient :</p>
<div class="highlight-python"><pre>qgis.utils.iface.addRasterLayer('/yourpath/[% "filename" %].tif','[% "layername" %]
')</pre>
</div>
</div>
<div class="section" id="joins-menu">
<span id="sec-joins"></span><h2>Onglet Jointures<a class="headerlink" href="#joins-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/join.png"><img alt="join" src="../../../_images/join.png" style="width: 2em;" /></a> L&#8217;onglet <em class="guilabel">Jointures</em> permet de <span class="target" id="index-25"></span>joindre une table attributaire chargée à une couche vecteur chargée. Après avoir cliqué sur le bouton <a class="reference internal" href="../../../_images/mActionSignPlus.png"><img alt="mActionSignPlus" src="../../../_images/mActionSignPlus.png" style="width: 1.5em;" /></a>, la fenêtre <em class="guilabel">Ajouter une jointure vectorielle</em> apparaît. Vous devez définir une <span class="target" id="index-26"></span>couche de jointure à connecter à la couche cible. Ensuite, vous devez définir un champ de jointure qui sera commun à la table à joindre et à la table attributaire de la couche cible. Vous pouvez enfin spécifier la liste des champs à joindre en cochant la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Choisir les champs à joindre</em>. Il en résulte que toutes les informations de la table à joindre seront affichés en plus des champs de la table cible. Si vous avez spécifié une liste de champs à joindre, seuls ceux-ci apparaîtront dans la table attributaire de la couche cible.</p>
<p>Actuellement, KADAS gère les jointures de tables non spatiales aux formats pris en charge par OGR (par exemple CSV, DBF, Excel), au format texte délimité et issues de PostgreSQL (voir <a class="reference internal" href="#figure-joins-1">figure_joins_1</a>).</p>
<p id="figure-joins-1"><strong>Figure Joins 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/join_attributes.png" src="../../../_images/join_attributes.png" />
<p class="caption">Joindre une table attributaire à une couche vectorielle existante <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>De plus, la fenêtre de jointure vous permet de :</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Mettre la couche jointe en cache dans la mémoire virtuelle</em></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Créer un index des attributs joins</em></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Choisir les champs à joindre</em></p>
</li>
<li><p class="first"><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Personnaliser le préfixe du champ</em></p>
</li>
</ul>
</div>
<div class="section" id="diagrams-menu">
<span id="sec-diagram"></span><h2>Onglet Diagrammes<a class="headerlink" href="#diagrams-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> L&#8217;onglet <em class="guilabel">Diagrammes</em> permet d&#8217;ajouter une couche de graphiques sur une couche vecteur (voir <a class="reference internal" href="#figure-diagrams-1">figure_diagrams_1</a>).</p>
<p>Cet onglet permet de générer des diagrammes circulaires, textes et des histogrammes.</p>
<p>L&#8217;onglet est subdivisé en quatre sous-onglets : <em class="guilabel">Apparence</em>, <em class="guilabel">Taille</em>, <em class="guilabel">Postion</em> et <em class="guilabel">Options</em>.</p>
<p>Dans les cas de diagramme texte ou en camembert, les valeurs texte des différentes colonnes de données sont affichées les unes en-dessous des autres à l&#8217;intérieur d&#8217;un cercle ou dans une boîte avec des diviseurs. Dans l&#8217;onglet <em class="guilabel">Taille</em>, la taille du diagramme est basée sur une taille fixe ou sur la mise à l&#8217;échelle linéaire selon un attribut de classification. Le placement des diagrammes, qui se fait dans l&#8217;onglet <em class="guilabel">Position</em>, est en interaction avec l&#8217;étiquetage, donc des conflits de position entre les diagrammes et les étiquettes sont détectés et résolus. En outre, les positions de diagramme peuvent être fixées manuellement.</p>
<p id="figure-diagrams-1"><strong>Figure Diagrams 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/diagram_tab.png" src="../../../_images/diagram_tab.png" />
<p class="caption">Onglet Diagrammes de la fenêtre de Propriétés d&#8217;une couche vecteur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>Nous allons vous montrer un exemple en superposant aux frontières de l&#8217;Alaska des données concernant la température issues d&#8217;une couche vecteur portant sur le climat. Toutes ces couches sont disponibles dans l&#8217;échantillon de données QGIS (voir section <a class="reference internal" href="../introduction/getting_started.html#label-sampledata"><em>Échantillon de données</em></a>).</p>
<ol class="arabic simple">
<li><p class="first">Tout d&#8217;abord, cliquez sur le bouton <a class="reference internal" href="../../../_images/mActionAddOgrLayer.png"><img alt="mActionAddOgrLayer" src="../../../_images/mActionAddOgrLayer.png" style="width: 1.5em;" /></a> <sup>Ajouter une couche vecteur</sup>, naviguez jusqu&#8217;au jeu de données exemples de KADAS et ajoutez les deux couches <tt class="file docutils literal"><span class="pre">alaska.shp</span></tt> et <tt class="file docutils literal"><span class="pre">climate.shp</span></tt>.</p>
</li>
<li><p class="first">Double-cliquez sur la couche <tt class="docutils literal"><span class="pre">climate</span></tt> dans la légende pour ouvrir la fenêtre de <em class="guilabel">Propriétés de la Couche</em>.</p>
</li>
<li><p class="first">Cliquez sur l&#8217;onglet <em class="guilabel">Diagrammes</em>, activez la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Afficher les diagrammes</em> et choisissez &#8216;Diagramme texte dans la liste déroulante <a href="#id1"><span class="problematic" id="id2">|</span></a>selectstring|`Type de diagramme`.</p>
</li>
<li><p class="first">Dans l&#8217;onglet <em class="guilabel">Apparence</em>, nous choisissons le bleu clair comme couleur de fond et définissons une taille fixe de 18 mm dans l&#8217;onglet <em class="guilabel">Taille</em>.</p>
</li>
<li><p class="first">Dans l&#8217;onglet <em class="guilabel">Position</em>, l&#8217;emplacement défini est <cite>Autour du point</cite>.</p>
</li>
<li><p class="first">Sur le diagramme, nous souhaiterions afficher les valeurs de trois colonnes <cite>T_F_JAN`</cite>, <tt class="docutils literal"><span class="pre">T_F_JUL</span></tt> et <tt class="docutils literal"><span class="pre">T_F_MEAN</span></tt>. D&#8217;abord, sélectionnez <tt class="docutils literal"><span class="pre">T_F_JAN</span></tt> de la colonne <em class="guilabel">Attributs</em> et cliquez sur le bouton <a class="reference internal" href="../../../_images/mActionSignPlus.png"><img alt="mActionSignPlus" src="../../../_images/mActionSignPlus.png" style="width: 1.5em;" /></a> puis <tt class="docutils literal"><span class="pre">T_F_JUL</span></tt> et enfin <tt class="docutils literal"><span class="pre">T_F_MEAN</span></tt>.</p>
</li>
<li><p class="first">Cliquez maintenant sur <strong>[Appliquer]</strong> pour afficher les diagrammes sur la carte.</p>
</li>
<li><p class="first">Vous pouvez adapter la taille du graphique dans l&#8217;onglet <em class="guilabel">Taille</em>. Décochez <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Taille Fixe</em> et définissez la taille des diagrammes en fonction d&#8217;un attribut avec le bouton <strong>[Trouver la valeur maximale]</strong> et la liste déroulante  <em class="guilabel">Taille</em>. Si les diagrammes apparaissent trop petits à l&#8217;écran, vous pouvez cocher la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Augmenter la taille des petits diagrammes</em> et définir la Taille minimale des diagrammes.</p>
</li>
<li><p class="first">Changez les couleurs des attributs en double-cliquant sur les rectangles colorées dans le champ <em class="guilabel">Attributs utilisés</em>. <a class="reference internal" href="#figure-diagrams-2">Figure_diagrams_2</a> donne un aperçu.</p>
</li>
<li><p class="first">Cliquez enfin sur <strong>[OK]</strong>.</p>
</li>
</ol>
<p id="figure-diagrams-2"><strong>Figure Diagrams 2:</strong></p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../../_images/climate_diagram.png"><img alt="../../../_images/climate_diagram.png" src="../../../_images/climate_diagram.png" style="width: 25em;" /></a>
<p class="caption">Diagrammes issus de données de températures sur une carte <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
<p>N&#8217;oubliez pas que, dans l&#8217;onglet <em class="guilabel">Position</em>, en cochant la case <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <em class="guilabel">Source de définition de la position</em>, vous pouvez utiliser des valeurs d&#8217;attributs pour choisir l&#8217;emplacement des diagrammes. Par ailleurs, dans l&#8217;onglet  <em class="guilabel">Apparence</em>, vous pouvez définir la visibilité en fonction de l&#8217;échelle.</p>
<p>La taille et les attributs peuvent aussi être une expression. Utilisez le bouton <a class="reference internal" href="../../../_images/mIconExpressionEditorOpen.png"><img alt="mActionmIconExpressionEditorOpen" src="../../../_images/mIconExpressionEditorOpen.png" style="width: 1.5em;" /></a> pour ajouter une expression. Voir <a class="reference internal" href="expression.html#vector-expressions"><em>Expressions</em></a> pour plus d&#8217;informations et des exemples.</p>
</div>
<div class="section" id="metadata-menu">
<span id="vectormetadatamenu"></span><h2>Onglet Métadonnées<a class="headerlink" href="#metadata-menu" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 2em;" /></a> Le menu <em class="guilabel">Métadonnées</em> comprend les sections <em class="guilabel">Description</em>, <em class="guilabel">Attribution</em>, <em class="guilabel">URL Métadonnées</em>,  <em class="guilabel">LegendURL</em> et <em class="guilabel">Propriétés</em>.</p>
<p>Dans la section <em class="guilabel">Propriétés</em>, vous disposez des informations générales sur la couche, y compris celles spécifiques à son type, sa localisation, le nombre d&#8217;entités, le type d&#8217;entités et les possibilités d&#8217;édition. La table <em class="guilabel">Emprise</em> vous  fournit les informations sur l&#8217;emprise de la couche et le <em class="guilabel">Système de Référence Spatiale de la Couche</em> qui est une information sur le SCR de la couche. Voici un moyen rapide d&#8217;obtenir des informations sur la couche.</p>
<p>En complément, vous pouvez ajouter ou éditer un titre ainsi qu&#8217;un résumé pour la couche dans la section <em class="guilabel">Description</em>. Il est aussi possible de définir ici une <em class="guilabel">Liste de mots-clés</em>. Ces listes de mots-clés peuvent être utilisées dans un catalogue de métadonnées. Si vous souhaitez utiliser un titre depuis un fichier XML de métadonnées, vous devez renseigner un lien dans le champ <em class="guilabel">DataUrl</em>. Utilisez <em class="guilabel">Attribution</em> pour récupérer les données d&#8217;attributs depuis un catalogue de métadonnées XML. Dans le champ <em class="guilabel">URL Métadonnées</em>, vous pouvez définir le chemin général d&#8217;accès au catalogue de métadonnées XML. Cette information sera stockée dans le fichier de projet KADAS pour les sessions suivantes et sera utilisée par KADAS server.</p>
<p id="figure-metadata-vect"><strong>Figure Metadata 1:</strong></p>
<div class="figure align-center">
<img alt="../../../_images/vector_metadata_tab.png" src="../../../_images/vector_metadata_tab.png" />
<p class="caption">Onglet Métadonnées de la fenêtre de Propriétés d&#8217;une couche vecteur <a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a></p>
</div>
</div>
</div>

                        
                    
                </div>
                  
            </div>
        </div>
    

    <!--<a href="https://github.com/qgis/"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>-->
    <div class="related">
       
      
      <ul>
        <li><a href="../index.html"></a> &raquo;</li> 
      </ul>
    </div>
  </body>
</html>